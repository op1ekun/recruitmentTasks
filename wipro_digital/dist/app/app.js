!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";n(1)},function(e,t,n){"use strict";function r(e){var t=e.params,n=e.response;(0,u.updateForecast)({params:t,response:{city:n.city,singleForecast:n.list[s]}})}var o=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(i){o=!0,a=i}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(2),c=n(5),u=n(6),i=void 0,s=0;c.appEventHandlers.onSearch=function(e,t){var n=e.split(","),c=o(n,2),u=c[0],l=c[1];(0,a.getForecast)(u,l,t).then(function(e){i=e,s=0,r(i)})},u.forecastEventHandlers.onNext=function(){s+1<i.response.list.length&&(s++,r(i))},u.forecastEventHandlers.onPrev=function(){s-1>0&&(s--,r(i))},(0,a.getForecast)().then(function(e){i=e,s=0,r(i)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return"http://api.openweathermap.org/data/2.5/forecast?q="+e+","+t+"&mode=json&appid="+u["default"].apiKey+"&units="+n}function a(){var e=arguments.length<=0||void 0===arguments[0]?"London":arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?i.METRIC:arguments[2],r=o(e,t,n);return fetch(r,{method:"get"}).then(function(r){return r.json().then(function(r){return{response:r,params:{city:e,country:t,units:n}}})})["catch"](function(e){console.error(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getForecast=a;var c=n(3),u=r(c),i=n(4)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={apiKey:"3f697675424c3d0afeafbe02610ce274"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.IMPERIAL="imperial",t.METRIC="metric"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appEventHandlers=void 0;var r=n(4),o=t.appEventHandlers={onSearch:null,onRefresh:null},a=document.querySelector("#searchText"),c=document.querySelector("#search"),u=document.querySelector("#units"),i=r.METRIC;u.addEventListener("click",function(e){var t=e.target.nodeName.toLowerCase();i="input"===t?e.target.value:e.target.control.value}),a.addEventListener("keypress",function(e){13===e.keyCode&&o.onSearch&&a.value&&(o.onSearch(a.value,i),a.value="")}),c.addEventListener("click",function(){o.onSearch&&a.value&&(o.onSearch(a.value,i),a.value="")})},function(e,t,n){"use strict";function r(e){var t=e.response,n=e.params,r=t.singleForecast;i.innerHTML=t.city.name+", "+t.city.country,s.innerHTML=(r.rain&&r.rain["3h"]||0)+" mm",l.innerHTML=""+Math.round(r.main.temp)+(n.units===u.IMPERIAL?"&deg;F":"&deg;C"),d.innerHTML=Math.round(r.main.pressure)+" hPa",f.innerHTML=r.clouds.all+"%"}function o(e){r(e)}function a(e){r(e)}function c(e){r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.forecastEventHandlers=void 0,t.updateForecast=o,t.getNextData=a,t.getPrevData=c;var u=n(4),i=document.querySelector(".city"),s=document.querySelector(".rain > span"),l=document.querySelector(".temp > span"),d=document.querySelector(".pres > span"),f=document.querySelector(".clouds > span"),v=document.querySelector(".actions > .next"),p=document.querySelector(".actions > .prev"),y=t.forecastEventHandlers={onNext:null,onPrev:null};v.addEventListener("click",function(){y.onNext&&y.onNext()}),p.addEventListener("click",function(){y.onPrev&&y.onPrev()})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL2FwcC5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgOTQ4YTBjZDg3NDU0ZjYwM2RlMTUiLCJ3ZWJwYWNrOi8vLy4vYXBwL2FwcC5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvYXBwLmNvbnRyb2xsZXJzLmpzIiwid2VicGFjazovLy8uL2FwcC9mb3JlY2FzdC9mb3JlY2FzdC5zZXJ2aWNlcy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvY29uZmlnLmpzIiwid2VicGFjazovLy8uL2FwcC9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2FwcC52aWV3cy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvZm9yZWNhc3QvZm9yZWNhc3Qudmlld3MuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwidXBkYXRlRm9yZWNhc3RWaWV3IiwiX3JlZiIsInBhcmFtcyIsInJlc3BvbnNlIiwiX2ZvcmVjYXN0Vmlld3MiLCJ1cGRhdGVGb3JlY2FzdCIsImNpdHkiLCJzaW5nbGVGb3JlY2FzdCIsImxpc3QiLCJjdXJyZW50Rm9yY2FzdEluZGV4IiwiX3NsaWNlZFRvQXJyYXkiLCJzbGljZUl0ZXJhdG9yIiwiYXJyIiwiaSIsIl9hcnIiLCJfbiIsIl9kIiwiX2UiLCJ1bmRlZmluZWQiLCJfcyIsIl9pIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInB1c2giLCJ2YWx1ZSIsImxlbmd0aCIsImVyciIsIkFycmF5IiwiaXNBcnJheSIsIk9iamVjdCIsIlR5cGVFcnJvciIsIl9mb3JlY2FzdFNlcnZpY2VzIiwiX2FwcFZpZXdzIiwiY3VycmVudERhdGEiLCJhcHBFdmVudEhhbmRsZXJzIiwib25TZWFyY2giLCJzZWFyY2hUZXh0IiwidW5pdHMiLCJfc2VhcmNoVGV4dCRzcGxpdCIsInNwbGl0IiwiX3NlYXJjaFRleHQkc3BsaXQyIiwiY291bnRyeSIsImdldEZvcmVjYXN0IiwidGhlbiIsImZvcmVjYXN0RGF0YSIsImZvcmVjYXN0RXZlbnRIYW5kbGVycyIsIm9uTmV4dCIsIm9uUHJldiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImdldFF1ZXJ5VVJMIiwiX2NvbmZpZzIiLCJhcGlLZXkiLCJhcmd1bWVudHMiLCJfY29uc3RhbnRzIiwiTUVUUklDIiwicXVlcnlVUkwiLCJmZXRjaCIsIm1ldGhvZCIsImpzb24iLCJwYXJzZWREYXRhIiwiY29uc29sZSIsImVycm9yIiwiZGVmaW5lUHJvcGVydHkiLCJfY29uZmlnIiwiSU1QRVJJQUwiLCJvblJlZnJlc2giLCJzZWFyY2hUZXh0SW5wdXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZWFyY2hCdXR0b24iLCJ1bml0c0NudCIsInVuaXRzRm9ybWF0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2Iiwibm9kZU5hbWUiLCJ0YXJnZXQiLCJ0b0xvd2VyQ2FzZSIsImNvbnRyb2wiLCJrZXlDb2RlIiwicmVuZGVyIiwiY2l0eUNudCIsImlubmVySFRNTCIsIm5hbWUiLCJyYWluQ250IiwicmFpbiIsInRlbXBDbnQiLCJNYXRoIiwicm91bmQiLCJtYWluIiwidGVtcCIsInByZXNDbnQiLCJwcmVzc3VyZSIsImNsb3Vkc0NudCIsImNsb3VkcyIsImFsbCIsImdldE5leHREYXRhIiwibmV4dERhdGEiLCJnZXRQcmV2RGF0YSIsInByZXZEYXRhIiwibmV4dEJ1dHRvbiIsInByZXZCdXR0b24iXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBcUNBLE9BVEFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsR0FHQVYsRUFBQSxLRE1NLFNBQVNJLEVBQVFELEVBQVNILEdBRS9CLFlFN0NEQSxHQUFBLElGbURNLFNBQVNJLEVBQVFELEVBQVNILEdBRS9CLFlHdkNELFNBQVNXLEdBQVRDLEdIK0RLLEdHL0R3QkMsR0FBQUQsRUFBQUMsT0FBUUMsRUFBQUYsRUFBQUUsVUFHakMsRUFBQUMsRUFBQUMsaUJBQ0lILE9BQVFBLEVBQ1JDLFVBQ0lHLEtBQU1ILEVBQVNHLEtBQ2ZDLGVBQWdCSixFQUFTSyxLQUFLQyxNSGtDekMsR0FBSUMsR0FBaUIsV0FBYyxRQUFTQyxHQUFjQyxFQUFLQyxHQUFLLEdBQUlDLE1BQWVDLEdBQUssRUFBVUMsR0FBSyxFQUFXQyxFQUFLQyxNQUFXLEtBQU0sSUFBSyxHQUFpQ0MsR0FBN0JDLEVBQUtSLEVBQUlTLE9BQU9DLGNBQW1CUCxHQUFNSSxFQUFLQyxFQUFHRyxRQUFRQyxRQUFvQlYsRUFBS1csS0FBS04sRUFBR08sUUFBWWIsR0FBS0MsRUFBS2EsU0FBV2QsR0FBM0RFLEdBQUssSUFBb0UsTUFBT2EsR0FBT1osR0FBSyxFQUFNQyxFQUFLVyxFQUFPLFFBQVUsS0FBV2IsR0FBTUssRUFBRyxXQUFXQSxFQUFHLFlBQWUsUUFBVSxHQUFJSixFQUFJLEtBQU1DLElBQVEsTUFBT0gsR0FBUSxNQUFPLFVBQVVGLEVBQUtDLEdBQUssR0FBSWdCLE1BQU1DLFFBQVFsQixHQUFRLE1BQU9BLEVBQVksSUFBSVMsT0FBT0MsV0FBWVMsUUFBT25CLEdBQVEsTUFBT0QsR0FBY0MsRUFBS0MsRUFBYSxNQUFNLElBQUltQixXQUFVLDRER3hEdmxCQyxFQUFBNUMsRUFBQSxHQUNBNkMsRUFBQTdDLEVBQUEsR0FDQWUsRUFBQWYsRUFBQSxHQUdJOEMsRUFBQSxPQUVBMUIsRUFBc0IsQ0E0QjFCeUIsR0FBQUUsaUJBQWlCQyxTQUFXLFNBQUNDLEVBQVlDLEdIaUVwQyxHQUFJQyxHRzlEaUJGLEVBQVdHLE1BQU0sS0hnRWxDQyxFQUFxQmhDLEVBQWU4QixFQUFtQixHR2hFdkRsQyxFQUFBb0MsRUFBQSxHQUFNQyxFQUFBRCxFQUFBLElBRVgsRUFBQVQsRUFBQVcsYUFBWXRDLEVBQU1xQyxFQUFTSixHQUN0Qk0sS0FBSyxTQUFDQyxHQUVIWCxFQUFjVyxFQUZNckMsRUFJRSxFQUN0QlQsRUFBbUJtQyxNQVUvQi9CLEVBQUEyQyxzQkFBc0JDLE9BQVMsV0FHdkJ2QyxFQUFzQixFQUFJMEIsRUFBWWhDLFNBQVNLLEtBQUttQixTQUNwRGxCLElBQ0FULEVBQW1CbUMsS0FVM0IvQixFQUFBMkMsc0JBQXNCRSxPQUFTLFdBR3ZCeEMsRUFBc0IsRUFBSSxJQUMxQkEsSUFDQVQsRUFBbUJtQyxNQUszQixFQUFBRixFQUFBVyxlQUNLQyxLQUFLLFNBQUNDLEdBSUhYLEVBQWNXLEVBSk1yQyxFQU1FLEVBQ3RCVCxFQUFtQm1DLE1Id0VyQixTQUFTMUMsRUFBUUQsRUFBU0gsR0FFL0IsWUFhQSxTQUFTNkQsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsVUFBU0YsR0lyS3hGLFFBQVNHLEdBQVloRCxFQUFNcUMsRUFBU0osR0FHaEMsMkRBQTREakMsRUFBQSxJQUFRcUMsRUFBQSxvQkFBMkJZLGFBQU9DLE9BQVAsVUFBdUJqQixFQVduSCxRQUFTSyxLSmtMWCxHSWxMdUJ0QyxHQUFBbUQsVUFBQTlCLFFBQUEsR0FBQVQsU0FBQXVDLFVBQUEsR0FBTyxTQUFBQSxVQUFBLEdBQVVkLEVBQUFjLFVBQUE5QixRQUFBLEdBQUFULFNBQUF1QyxVQUFBLEdBQVUsR0FBQUEsVUFBQSxHQUFJbEIsRUFBQWtCLFVBQUE5QixRQUFBLEdBQUFULFNBQUF1QyxVQUFBLEdBQUFDLEVBQUFDLE9BQUFGLFVBQUEsR0FHakRHLEVBQVdOLEVBQVloRCxFQUFNcUMsRUFBU0osRUFFNUMsT0FBT3NCLE9BQU1ELEdBQ0xFLE9BQVEsUUFFWGpCLEtBQUssU0FBUzFDLEdBRVgsTUFBT0EsR0FBUzRELE9BQ1hsQixLQUFLLFNBQVNtQixHQUVYLE9BRUk3RCxTQUFVNkQsRUFFVjlELFFBQ0lJLEtBQU1BLEVBQ05xQyxRQUFTQSxFQUNUSixNQUFPQSxRQWZ4QnNCLFNBb0JJLFNBQVNqQyxHQUNacUMsUUFBUUMsTUFBTXRDLEtKa0h6QkcsT0FBT29DLGVBQWUzRSxFQUFTLGNBQzNCa0MsT0FBTyxJQUVYbEMsRUkvSWVvRCxhQXpCaEIsSUFBQXdCLEdBQUEvRSxFQUFBLEdKNEtLa0UsRUFBV0wsRUFBdUJrQixHSTNLdkNWLEVBQUFyRSxFQUFBLElKdU9NLFNBQVNJLEVBQVFELEdBRXRCLFlBRUF1QyxRQUFPb0MsZUFBZTNFLEVBQVMsY0FDM0JrQyxPQUFPLElBRVhsQyxjSzlPR2dFLE9BQVEscUNMb1BOLFNBQVMvRCxFQUFRRCxHQUV0QixZQUVBdUMsUUFBT29DLGVBQWUzRSxFQUFTLGNBQzdCa0MsT0FBTyxHTTFQR2xDLEdBQUE2RSxTQUFXLFdBQ1g3RSxFQUFBbUUsT0FBUyxVTmdRaEIsU0FBU2xFLEVBQVFELEVBQVNILEdBRS9CLFlBRUEwQyxRQUFPb0MsZUFBZTNFLEVBQVMsY0FDM0JrQyxPQUFPLElBRVhsQyxFQUFRNEMsaUJBQW1CbEIsTU94UTVCLElBQUF3QyxHQUFBckUsRUFBQSxHQUVXK0MsRUFBQTVDLEVBQUE0QyxrQkFDUEMsU0FBVSxLQUNWaUMsVUFBVyxNQUdUQyxFQUFrQkMsU0FBU0MsY0FBYyxlQUN6Q0MsRUFBZUYsU0FBU0MsY0FBYyxXQUN0Q0UsRUFBV0gsU0FBU0MsY0FBYyxVQUdwQ0csRUFBQWxCLEVBQUFDLE1BR0pnQixHQUFTRSxpQkFBaUIsUUFBUyxTQUFDQyxHQUdoQyxHQUFNQyxHQUFXRCxFQUFHRSxPQUFPRCxTQUFTRSxhQUdoQ0wsR0FEYSxVQUFiRyxFQUNjRCxFQUFHRSxPQUFPdEQsTUFHVm9ELEVBQUdFLE9BQU9FLFFBQVF4RCxRQUt4QzZDLEVBQWdCTSxpQkFBaUIsV0FBWSxTQUFDQyxHQUl2QixLQUFmQSxFQUFHSyxTQUdDL0MsRUFBaUJDLFVBQVlrQyxFQUFnQjdDLFFBQzdDVSxFQUFpQkMsU0FBU2tDLEVBQWdCN0MsTUFBT2tELEdBREdMLEVBSXBDN0MsTUFBUSxNQU1wQ2dELEVBQWFHLGlCQUFpQixRQUFTLFdBSS9CekMsRUFBaUJDLFVBQVlrQyxFQUFnQjdDLFFBQzdDVSxFQUFpQkMsU0FBU2tDLEVBQWdCN0MsTUFBT2tELEdBREdMLEVBSXBDN0MsTUFBUSxPUGlSMUIsU0FBU2pDLEVBQVFELEVBQVNILEdBRS9CLFlRelRELFNBQVMrRixHQUFUbkYsR1JzVkssR1F0VllFLEdBQUFGLEVBQUFFLFNBQVVELEVBQUFELEVBQUFDLE9BR2pCSyxFQUFpQkosRUFBU0ksY0FFaEM4RSxHQUFRQyxVQUFlbkYsRUFBU0csS0FBS2lGLEtBQWQsS0FBdUJwRixFQUFTRyxLQUFLcUMsUUFDNUQ2QyxFQUFRRixXQUFlL0UsRUFBZWtGLE1BQVFsRixFQUFla0YsS0FBSyxPQUFTLEdBQXBELE1BQ3ZCQyxFQUFRSixVQUFSLEdBQXVCSyxLQUFLQyxNQUFNckYsRUFBZXNGLEtBQUtDLE9BQVM1RixFQUFPcUMsUUFBUG1CLEVBQUFXLFNBQTRCLFNBQVcsVUFDdEcwQixFQUFRVCxVQUFlSyxLQUFLQyxNQUFNckYsRUFBZXNGLEtBQUtHLFVBQXBCLE9BQ2xDQyxFQUFVWCxVQUFlL0UsRUFBZTJGLE9BQU9DLElBQXRCLElBZXRCLFFBQVM5RixHQUFleUMsR0FHM0JzQyxFQUFPdEMsR0FRSixRQUFTc0QsR0FBWUMsR0FFeEJqQixFQUFPaUIsR0FRSixRQUFTQyxHQUFZQyxHQUV4Qm5CLEVBQU9tQixHUjRRVnhFLE9BQU9vQyxlQUFlM0UsRUFBUyxjQUMzQmtDLE9BQU8sSUFFWGxDLEVBQVF1RCxzQkFBd0I3QixPQUNoQzFCLEVRdlNlYSxpQlJ3U2ZiLEVRN1JlNEcsY1I4UmY1RyxFUXBSZThHLGFBN0RoQixJQUFBNUMsR0FBQXJFLEVBQUEsR0FFTWdHLEVBQVViLFNBQVNDLGNBQWMsU0FDakNlLEVBQVVoQixTQUFTQyxjQUFjLGdCQUNqQ2lCLEVBQVVsQixTQUFTQyxjQUFjLGdCQUNqQ3NCLEVBQVV2QixTQUFTQyxjQUFjLGdCQUNqQ3dCLEVBQVl6QixTQUFTQyxjQUFjLGtCQUNuQytCLEVBQWFoQyxTQUFTQyxjQUFjLG9CQUNwQ2dDLEVBQWFqQyxTQUFTQyxjQUFjLG9CQW9CL0IxQixFQUFBdkQsRUFBQXVELHVCQUdQQyxPQUFRLEtBQ1JDLE9BQVEsS0FrQ1p1RCxHQUFXM0IsaUJBQWlCLFFBQVMsV0FJN0I5QixFQUFzQkMsUUFDdEJELEVBQXNCQyxXQUk5QnlELEVBQVc1QixpQkFBaUIsUUFBUyxXQUk3QjlCLEVBQXNCRSxRQUN0QkYsRUFBc0JFIiwiZmlsZSI6ImFwcC9hcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG5cdFxuXHR2YXIgX2ZvcmVjYXN0U2VydmljZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9hcHBWaWV3cyA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2ZvcmVjYXN0Vmlld3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0Ly8gaG9sZHMgY3VycmVudCBmb3JlY2FzdCBkYXRhIGZvcm0gQVBJXG5cdHZhciBjdXJyZW50RGF0YSA9IHZvaWQgMDtcblx0Ly8gdGhlIGluZGV4IG9mIHRoZSBjdXJyZW50IChzaW5nbGUpIGZvcmVjYXN0XG5cdHZhciBjdXJyZW50Rm9yY2FzdEluZGV4ID0gMDtcblx0XG5cdC8qKlxyXG5cdCAqIFByZXBhcmVzIGRhdGEgZm9yIHRoZSB2aWV3LCBhbmQgYW5kIHVwZGF0ZXMgaXQuXHJcblx0ICogXHJcblx0ICogQHBhcmFtICB7T2JqZWN0fSBmb3JlY2FzdERhdGEgICAgYmVzcG9rZSBkYXRhIG9iamVjdCBjb250YWluaW5nIGJvdGggdGhlIG9yaWdpbmFsIHJlc3BvbnNlIGFuZCBxdWVyeSBwYXJhbXNcclxuXHQgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcblx0ICovXG5cdGZ1bmN0aW9uIHVwZGF0ZUZvcmVjYXN0VmlldyhfcmVmKSB7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdFxuXHQgICAgdmFyIHBhcmFtcyA9IF9yZWYucGFyYW1zO1xuXHQgICAgdmFyIHJlc3BvbnNlID0gX3JlZi5yZXNwb25zZTtcblx0ICAgICgwLCBfZm9yZWNhc3RWaWV3cy51cGRhdGVGb3JlY2FzdCkoe1xuXHQgICAgICAgIHBhcmFtczogcGFyYW1zLFxuXHQgICAgICAgIHJlc3BvbnNlOiB7XG5cdCAgICAgICAgICAgIGNpdHk6IHJlc3BvbnNlLmNpdHksXG5cdCAgICAgICAgICAgIHNpbmdsZUZvcmVjYXN0OiByZXNwb25zZS5saXN0W2N1cnJlbnRGb3JjYXN0SW5kZXhdXG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdH1cblx0XG5cdC8qKlxyXG5cdCAqIEEgaGFuZGxlciBmb3IgdGhlIG9uIHNlYXJjaCBldmVudC5cclxuXHQgKiBDYWxscyBzZXJ2aWNlIG1ldGhvZCB0byBnZXQgZm9yZWNhc3QgZGF0YSBmcm9tIEFQSS5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0gIHtTdHJpbmd9IHNlYXJjaFRleHQgIHRoZSB0ZXh0IHRoYXQgdXNlciBlbnRlcmVkIGluIHRoZSBzZWFyY2ggYm94XHJcblx0ICogQHBhcmFtICB7U3RyaW5nfSB1bml0cyAgICAgICBlaXRoZXIgJ21ldHJpYycgb3IgJ2ltcGVyaWFsJ1xyXG5cdCAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuXHQgKi9cblx0X2FwcFZpZXdzLmFwcEV2ZW50SGFuZGxlcnMub25TZWFyY2ggPSBmdW5jdGlvbiAoc2VhcmNoVGV4dCwgdW5pdHMpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICB2YXIgX3NlYXJjaFRleHQkc3BsaXQgPSBzZWFyY2hUZXh0LnNwbGl0KCcsJyk7XG5cdFxuXHQgICAgdmFyIF9zZWFyY2hUZXh0JHNwbGl0MiA9IF9zbGljZWRUb0FycmF5KF9zZWFyY2hUZXh0JHNwbGl0LCAyKTtcblx0XG5cdCAgICB2YXIgY2l0eSA9IF9zZWFyY2hUZXh0JHNwbGl0MlswXTtcblx0ICAgIHZhciBjb3VudHJ5ID0gX3NlYXJjaFRleHQkc3BsaXQyWzFdO1xuXHRcblx0XG5cdCAgICAoMCwgX2ZvcmVjYXN0U2VydmljZXMuZ2V0Rm9yZWNhc3QpKGNpdHksIGNvdW50cnksIHVuaXRzKS50aGVuKGZ1bmN0aW9uIChmb3JlY2FzdERhdGEpIHtcblx0ICAgICAgICAvLyByZWZyZXNoIGRhdGFcblx0ICAgICAgICBjdXJyZW50RGF0YSA9IGZvcmVjYXN0RGF0YTtcblx0ICAgICAgICAvLyByZXNldCBpbmRleFxuXHQgICAgICAgIGN1cnJlbnRGb3JjYXN0SW5kZXggPSAwO1xuXHQgICAgICAgIHVwZGF0ZUZvcmVjYXN0VmlldyhjdXJyZW50RGF0YSk7XG5cdCAgICB9KTtcblx0fTtcblx0XG5cdC8qKlxyXG5cdCAqIEEgaGFuZGxlciBmb3IgdGhlIG9uIG5leHQgZXZlbnQuXHJcblx0ICogVXBkYXRlcyBmaXJlY3QgdmlldyBpZiB1cGRhdGUgaXMgYXZhaWxhYmxlLlxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuXHQgKi9cblx0X2ZvcmVjYXN0Vmlld3MuZm9yZWNhc3RFdmVudEhhbmRsZXJzLm9uTmV4dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICBpZiAoY3VycmVudEZvcmNhc3RJbmRleCArIDEgPCBjdXJyZW50RGF0YS5yZXNwb25zZS5saXN0Lmxlbmd0aCkge1xuXHQgICAgICAgIGN1cnJlbnRGb3JjYXN0SW5kZXgrKztcblx0ICAgICAgICB1cGRhdGVGb3JlY2FzdFZpZXcoY3VycmVudERhdGEpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0LyoqXHJcblx0ICogQSBoYW5kbGVyIGZvciB0aGUgb24gcHJldiBldmVudC5cclxuXHQgKiBVcGRhdGVzIGZpcmVjdCB2aWV3IGlmIHVwZGF0ZSBpcyBhdmFpbGFibGUuXHJcblx0ICogXHJcblx0ICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG5cdCAqL1xuXHRfZm9yZWNhc3RWaWV3cy5mb3JlY2FzdEV2ZW50SGFuZGxlcnMub25QcmV2ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIGlmIChjdXJyZW50Rm9yY2FzdEluZGV4IC0gMSA+IDApIHtcblx0ICAgICAgICBjdXJyZW50Rm9yY2FzdEluZGV4LS07XG5cdCAgICAgICAgdXBkYXRlRm9yZWNhc3RWaWV3KGN1cnJlbnREYXRhKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8vIGluaXRcblx0KDAsIF9mb3JlY2FzdFNlcnZpY2VzLmdldEZvcmVjYXN0KSgpLnRoZW4oZnVuY3Rpb24gKGZvcmVjYXN0RGF0YSkge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIC8vIHJlZnJlc2ggZGF0YVxuXHRcblx0ICAgIGN1cnJlbnREYXRhID0gZm9yZWNhc3REYXRhO1xuXHQgICAgLy8gcmVzZXQgaW5kZXhcblx0ICAgIGN1cnJlbnRGb3JjYXN0SW5kZXggPSAwO1xuXHQgICAgdXBkYXRlRm9yZWNhc3RWaWV3KGN1cnJlbnREYXRhKTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmdldEZvcmVjYXN0ID0gZ2V0Rm9yZWNhc3Q7XG5cdFxuXHR2YXIgX2NvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2NvbmZpZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb25maWcpO1xuXHRcblx0dmFyIF9jb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8qKlxyXG5cdCAqIFBhcnNlIGFuZCByZXR1cm4gYW4gQVBJIHF1ZXJ5IFVSTC5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0gIHtTdHJpbmd9IGNpdHkgICAgdGhlIG5hbWUgb2YgYSBjaXR5XHJcblx0ICogQHBhcmFtICB7U3RyaW5nfSBjb3VudHJ5IHRoZSBuYW1lIG9mIGEgY291bnRyeVxyXG5cdCAqIEBwYXJhbSAge1N0cmluZ30gdW5pdHMgICB1bml0cyBmb3JtYXQsIGVpdGhlciBtZXRyaWMgb3IgaW1wZXJpYWxcclxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgdGhlIHBhcnNlZCB0ZW1wbGF0ZSBzdHJpbmdcclxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UXVlcnlVUkwoY2l0eSwgY291bnRyeSwgdW5pdHMpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICByZXR1cm4gJ2h0dHA6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L2ZvcmVjYXN0P3E9JyArIGNpdHkgKyAnLCcgKyBjb3VudHJ5ICsgJyZtb2RlPWpzb24mYXBwaWQ9JyArIF9jb25maWcyLmRlZmF1bHQuYXBpS2V5ICsgJyZ1bml0cz0nICsgdW5pdHM7XG5cdH1cblx0XG5cdC8qKlxyXG5cdCAqIEdldCBmb3JlY2FzdCBkYXRhIGZyb20gYXBpIGZvciBnaXZlbiBsb2NhdGlvbi5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0gIHtTdHJpbmd9IGNpdHkgICAgdGhlIG5hbWUgb2YgYSBjaXR5LCBkZWZhdWx0cyB0byAnTG9uZG9uJ1xyXG5cdCAqIEBwYXJhbSAge1N0cmluZ30gY291bnRyeSB0aGUgbmFtZSBvZiBhIGNvdW50cnksIGRlZmF1bHRzIHRvICcnXHJcblx0ICogQHBhcmFtICB7U3RyaW5nfSB1bml0cyAgIHVuaXRzIGZvcm1hdCwgZWl0aGVyIG1ldHJpYyBvciBpbXBlcmlhbCwgZGVmYXVsdHMgdG8gJ21ldHJpYydcclxuXHQgKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgICAgYSBQcm9taXNlIHRoYXQgZXZlbnR1YWxseSByZXR1cm5zIGEgY3VzdG9tIG9iamVjdCB3aXRoIHJlc3BvbnNlLCBhbmQgcXVlcnkgcGFyYW1ldGVycyBcclxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0Rm9yZWNhc3QoKSB7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdFxuXHQgICAgdmFyIGNpdHkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyAnTG9uZG9uJyA6IGFyZ3VtZW50c1swXTtcblx0ICAgIHZhciBjb3VudHJ5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMV07XG5cdCAgICB2YXIgdW5pdHMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyBfY29uc3RhbnRzLk1FVFJJQyA6IGFyZ3VtZW50c1syXTtcblx0ICAgIHZhciBxdWVyeVVSTCA9IGdldFF1ZXJ5VVJMKGNpdHksIGNvdW50cnksIHVuaXRzKTtcblx0XG5cdCAgICByZXR1cm4gZmV0Y2gocXVlcnlVUkwsIHtcblx0ICAgICAgICBtZXRob2Q6ICdnZXQnXG5cdCAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcblx0ICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpLnRoZW4oZnVuY3Rpb24gKHBhcnNlZERhdGEpIHtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgICAgICAvLyBvcmlnaW5hbCByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgcmVzcG9uc2U6IHBhcnNlZERhdGEsXG5cdCAgICAgICAgICAgICAgICAvLyBxdWVyeSBwYXJhbXMgc2VudCB0byBBUElcblx0ICAgICAgICAgICAgICAgIHBhcmFtczoge1xuXHQgICAgICAgICAgICAgICAgICAgIGNpdHk6IGNpdHksXG5cdCAgICAgICAgICAgICAgICAgICAgY291bnRyeTogY291bnRyeSxcblx0ICAgICAgICAgICAgICAgICAgICB1bml0czogdW5pdHNcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9KTtcblx0ICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG5cdCAgICB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgICAgYXBpS2V5OiAnM2Y2OTc2NzU0MjRjM2QwYWZlYWZiZTAyNjEwY2UyNzQnXG5cdH07XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0dmFyIElNUEVSSUFMID0gZXhwb3J0cy5JTVBFUklBTCA9ICdpbXBlcmlhbCc7XG5cdHZhciBNRVRSSUMgPSBleHBvcnRzLk1FVFJJQyA9ICdtZXRyaWMnO1xuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5hcHBFdmVudEhhbmRsZXJzID0gdW5kZWZpbmVkO1xuXHRcblx0dmFyIF9jb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIGFwcEV2ZW50SGFuZGxlcnMgPSBleHBvcnRzLmFwcEV2ZW50SGFuZGxlcnMgPSB7XG5cdCAgICBvblNlYXJjaDogbnVsbCxcblx0ICAgIG9uUmVmcmVzaDogbnVsbFxuXHR9O1xuXHRcblx0dmFyIHNlYXJjaFRleHRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWFyY2hUZXh0Jyk7XG5cdHZhciBzZWFyY2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VhcmNoJyk7XG5cdHZhciB1bml0c0NudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1bml0cycpO1xuXHRcblx0Ly8gZGVmYXVsdFxuXHR2YXIgdW5pdHNGb3JtYXQgPSBfY29uc3RhbnRzLk1FVFJJQztcblx0XG5cdC8vIGEgYml0IG9mIGV2ZW50IGRlbGVnYXRpb25cblx0dW5pdHNDbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXYpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICB2YXIgbm9kZU5hbWUgPSBldi50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XG5cdCAgICBpZiAobm9kZU5hbWUgPT09ICdpbnB1dCcpIHtcblx0ICAgICAgICB1bml0c0Zvcm1hdCA9IGV2LnRhcmdldC52YWx1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdW5pdHNGb3JtYXQgPSBldi50YXJnZXQuY29udHJvbC52YWx1ZTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHQvLyBsaXN0ZW5zIGZvciB1c2VyJ3Mga2VwcmVzc2VzLCBhbmQgcGFzc2VzIGRhdGEgdG8gY29udHJvbGxlclxuXHRzZWFyY2hUZXh0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZXYpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICAvLyBvbmx5IG9uIGVudGVyXG5cdFxuXHQgICAgaWYgKGV2LmtleUNvZGUgPT09IDEzKSB7XG5cdFxuXHQgICAgICAgIC8vIGlmIGNhbGxiYWNrIGlzIGNvbmZpZ3VyZWRcblx0ICAgICAgICBpZiAoYXBwRXZlbnRIYW5kbGVycy5vblNlYXJjaCAmJiBzZWFyY2hUZXh0SW5wdXQudmFsdWUpIHtcblx0ICAgICAgICAgICAgYXBwRXZlbnRIYW5kbGVycy5vblNlYXJjaChzZWFyY2hUZXh0SW5wdXQudmFsdWUsIHVuaXRzRm9ybWF0KTtcblx0XG5cdCAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBzZWFyY2ggaW5wdXRcblx0ICAgICAgICAgICAgc2VhcmNoVGV4dElucHV0LnZhbHVlID0gJyc7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8vIGxpc3RlbnMgZm9yIHVzZXIncyBjbGlja3MsIGFuZCBwYXNzZXMgZGF0YSB0byBjb250cm9sbGVyXG5cdHNlYXJjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICAvLyBpZiBjYWxsYmFjayBpcyBjb25maWd1cmVkXG5cdFxuXHQgICAgaWYgKGFwcEV2ZW50SGFuZGxlcnMub25TZWFyY2ggJiYgc2VhcmNoVGV4dElucHV0LnZhbHVlKSB7XG5cdCAgICAgICAgYXBwRXZlbnRIYW5kbGVycy5vblNlYXJjaChzZWFyY2hUZXh0SW5wdXQudmFsdWUsIHVuaXRzRm9ybWF0KTtcblx0XG5cdCAgICAgICAgLy8gcmVzZXQgdGhlIHNlYXJjaCBpbnB1dFxuXHQgICAgICAgIHNlYXJjaFRleHRJbnB1dC52YWx1ZSA9ICcnO1xuXHQgICAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZm9yZWNhc3RFdmVudEhhbmRsZXJzID0gdW5kZWZpbmVkO1xuXHRleHBvcnRzLnVwZGF0ZUZvcmVjYXN0ID0gdXBkYXRlRm9yZWNhc3Q7XG5cdGV4cG9ydHMuZ2V0TmV4dERhdGEgPSBnZXROZXh0RGF0YTtcblx0ZXhwb3J0cy5nZXRQcmV2RGF0YSA9IGdldFByZXZEYXRhO1xuXHRcblx0dmFyIF9jb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIGNpdHlDbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2l0eScpO1xuXHR2YXIgcmFpbkNudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yYWluID4gc3BhbicpO1xuXHR2YXIgdGVtcENudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wID4gc3BhbicpO1xuXHR2YXIgcHJlc0NudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVzID4gc3BhbicpO1xuXHR2YXIgY2xvdWRzQ250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3VkcyA+IHNwYW4nKTtcblx0dmFyIG5leHRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aW9ucyA+IC5uZXh0Jyk7XG5cdHZhciBwcmV2QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbnMgPiAucHJldicpO1xuXHRcblx0LyoqXHJcblx0ICogU1xyXG5cdCAqIEBwYXJhbSAge1t0eXBlXX0gb3B0aW9ucy5yZXNwb25zZSBbZGVzY3JpcHRpb25dXHJcblx0ICogQHBhcmFtICB7W3R5cGVdfSBvcHRpb25zLnBhcmFtcyAgIFtkZXNjcmlwdGlvbl1cclxuXHQgKiBAcmV0dXJuIHtbdHlwZV19ICAgICAgICAgICAgICAgICAgW2Rlc2NyaXB0aW9uXVxyXG5cdCAqL1xuXHRmdW5jdGlvbiByZW5kZXIoX3JlZikge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIHZhciByZXNwb25zZSA9IF9yZWYucmVzcG9uc2U7XG5cdCAgICB2YXIgcGFyYW1zID0gX3JlZi5wYXJhbXM7XG5cdCAgICB2YXIgc2luZ2xlRm9yZWNhc3QgPSByZXNwb25zZS5zaW5nbGVGb3JlY2FzdDtcblx0XG5cdCAgICBjaXR5Q250LmlubmVySFRNTCA9IHJlc3BvbnNlLmNpdHkubmFtZSArICcsICcgKyByZXNwb25zZS5jaXR5LmNvdW50cnk7XG5cdCAgICByYWluQ250LmlubmVySFRNTCA9IChzaW5nbGVGb3JlY2FzdC5yYWluICYmIHNpbmdsZUZvcmVjYXN0LnJhaW5bJzNoJ10gfHwgMCkgKyAnIG1tJztcblx0ICAgIHRlbXBDbnQuaW5uZXJIVE1MID0gJycgKyBNYXRoLnJvdW5kKHNpbmdsZUZvcmVjYXN0Lm1haW4udGVtcCkgKyAocGFyYW1zLnVuaXRzID09PSBfY29uc3RhbnRzLklNUEVSSUFMID8gJyZkZWc7RicgOiAnJmRlZztDJyk7XG5cdCAgICBwcmVzQ250LmlubmVySFRNTCA9IE1hdGgucm91bmQoc2luZ2xlRm9yZWNhc3QubWFpbi5wcmVzc3VyZSkgKyAnIGhQYSc7XG5cdCAgICBjbG91ZHNDbnQuaW5uZXJIVE1MID0gc2luZ2xlRm9yZWNhc3QuY2xvdWRzLmFsbCArICclJztcblx0fVxuXHRcblx0dmFyIGZvcmVjYXN0RXZlbnRIYW5kbGVycyA9IGV4cG9ydHMuZm9yZWNhc3RFdmVudEhhbmRsZXJzID0ge1xuXHRcblx0ICAgIC8vIGEgcGFydCBvZiBmb3JlY2FzdCB2aWV3XG5cdCAgICBvbk5leHQ6IG51bGwsXG5cdCAgICBvblByZXY6IG51bGxcblx0fTtcblx0XG5cdC8qKlxyXG5cdCAqIFt1cGRhdGVGb3JlY2FzdCBkZXNjcmlwdGlvbl1cclxuXHQgKiBAcGFyYW0gIHtbdHlwZV19IGZvcmVjYXN0RGF0YSBbZGVzY3JpcHRpb25dXHJcblx0ICogQHJldHVybiB7W3R5cGVdfSAgICAgICAgICAgICAgW2Rlc2NyaXB0aW9uXVxyXG5cdCAqL1xuXHRmdW5jdGlvbiB1cGRhdGVGb3JlY2FzdChmb3JlY2FzdERhdGEpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICByZW5kZXIoZm9yZWNhc3REYXRhKTtcblx0fVxuXHRcblx0LyoqXHJcblx0ICogW2dldE5leHREYXRhIGRlc2NyaXB0aW9uXVxyXG5cdCAqIEBwYXJhbSAge1t0eXBlXX0gbmV4dERhdGEgW2Rlc2NyaXB0aW9uXVxyXG5cdCAqIEByZXR1cm4ge1t0eXBlXX0gICAgICAgICAgW2Rlc2NyaXB0aW9uXVxyXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXROZXh0RGF0YShuZXh0RGF0YSkge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIHJlbmRlcihuZXh0RGF0YSk7XG5cdH1cblx0XG5cdC8qKlxyXG5cdCAqIFtnZXRQcmV2RGF0YSBkZXNjcmlwdGlvbl1cclxuXHQgKiBAcGFyYW0gIHtbdHlwZV19IHByZXZEYXRhIFtkZXNjcmlwdGlvbl1cclxuXHQgKiBAcmV0dXJuIHtbdHlwZV19ICAgICAgICAgIFtkZXNjcmlwdGlvbl1cclxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UHJldkRhdGEocHJldkRhdGEpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICByZW5kZXIocHJldkRhdGEpO1xuXHR9XG5cdFxuXHRuZXh0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIC8vIGlmIGNhbGxiYWNrIGlzIGNvbmZpZ3VyZWRcblx0XG5cdCAgICBpZiAoZm9yZWNhc3RFdmVudEhhbmRsZXJzLm9uTmV4dCkge1xuXHQgICAgICAgIGZvcmVjYXN0RXZlbnRIYW5kbGVycy5vbk5leHQoKTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHRwcmV2QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIC8vIGlmIGNhbGxiYWNrIGlzIGNvbmZpZ3VyZWRcblx0XG5cdCAgICBpZiAoZm9yZWNhc3RFdmVudEhhbmRsZXJzLm9uUHJldikge1xuXHQgICAgICAgIGZvcmVjYXN0RXZlbnRIYW5kbGVycy5vblByZXYoKTtcblx0ICAgIH1cblx0fSk7XG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGFwcC9hcHAuanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIDk0OGEwY2Q4NzQ1NGY2MDNkZTE1XG4gKiovIiwiLy8gZW50cnkgcG9pbnRcclxuaW1wb3J0ICcuL2FwcC5jb250cm9sbGVycy5qcyc7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvYXBwLmpzXG4gKiovIiwiaW1wb3J0IHtnZXRGb3JlY2FzdH0gZnJvbSAnLi9mb3JlY2FzdC9mb3JlY2FzdC5zZXJ2aWNlcy5qcyc7XHJcbmltcG9ydCB7YXBwRXZlbnRIYW5kbGVyc30gZnJvbSAnLi9hcHAudmlld3MuanMnO1xyXG5pbXBvcnQge3VwZGF0ZUZvcmVjYXN0LCBmb3JlY2FzdEV2ZW50SGFuZGxlcnN9IGZyb20gJy4vZm9yZWNhc3QvZm9yZWNhc3Qudmlld3MuanMnO1xyXG5cclxuLy8gaG9sZHMgY3VycmVudCBmb3JlY2FzdCBkYXRhIGZvcm0gQVBJXHJcbmxldCBjdXJyZW50RGF0YTtcclxuLy8gdGhlIGluZGV4IG9mIHRoZSBjdXJyZW50IChzaW5nbGUpIGZvcmVjYXN0XHJcbmxldCBjdXJyZW50Rm9yY2FzdEluZGV4ID0gMDtcclxuXHJcbi8qKlxyXG4gKiBQcmVwYXJlcyBkYXRhIGZvciB0aGUgdmlldywgYW5kIGFuZCB1cGRhdGVzIGl0LlxyXG4gKiBcclxuICogQHBhcmFtICB7T2JqZWN0fSBmb3JlY2FzdERhdGEgICAgYmVzcG9rZSBkYXRhIG9iamVjdCBjb250YWluaW5nIGJvdGggdGhlIG9yaWdpbmFsIHJlc3BvbnNlIGFuZCBxdWVyeSBwYXJhbXNcclxuICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlRm9yZWNhc3RWaWV3KHtwYXJhbXMsIHJlc3BvbnNlfSkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHVwZGF0ZUZvcmVjYXN0KHtcclxuICAgICAgICBwYXJhbXM6IHBhcmFtcyxcclxuICAgICAgICByZXNwb25zZToge1xyXG4gICAgICAgICAgICBjaXR5OiByZXNwb25zZS5jaXR5LFxyXG4gICAgICAgICAgICBzaW5nbGVGb3JlY2FzdDogcmVzcG9uc2UubGlzdFtjdXJyZW50Rm9yY2FzdEluZGV4XVxyXG4gICAgICAgIH1cclxuICAgIH0pOyAgIFxyXG59XHJcblxyXG4vKipcclxuICogQSBoYW5kbGVyIGZvciB0aGUgb24gc2VhcmNoIGV2ZW50LlxyXG4gKiBDYWxscyBzZXJ2aWNlIG1ldGhvZCB0byBnZXQgZm9yZWNhc3QgZGF0YSBmcm9tIEFQSS5cclxuICogXHJcbiAqIEBwYXJhbSAge1N0cmluZ30gc2VhcmNoVGV4dCAgdGhlIHRleHQgdGhhdCB1c2VyIGVudGVyZWQgaW4gdGhlIHNlYXJjaCBib3hcclxuICogQHBhcmFtICB7U3RyaW5nfSB1bml0cyAgICAgICBlaXRoZXIgJ21ldHJpYycgb3IgJ2ltcGVyaWFsJ1xyXG4gKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAqL1xyXG5hcHBFdmVudEhhbmRsZXJzLm9uU2VhcmNoID0gKHNlYXJjaFRleHQsIHVuaXRzKSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgbGV0IFtjaXR5LCBjb3VudHJ5XSA9IHNlYXJjaFRleHQuc3BsaXQoJywnKTtcclxuXHJcbiAgICBnZXRGb3JlY2FzdChjaXR5LCBjb3VudHJ5LCB1bml0cylcclxuICAgICAgICAudGhlbigoZm9yZWNhc3REYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHJlZnJlc2ggZGF0YVxyXG4gICAgICAgICAgICBjdXJyZW50RGF0YSA9IGZvcmVjYXN0RGF0YTtcclxuICAgICAgICAgICAgLy8gcmVzZXQgaW5kZXhcclxuICAgICAgICAgICAgY3VycmVudEZvcmNhc3RJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIHVwZGF0ZUZvcmVjYXN0VmlldyhjdXJyZW50RGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogQSBoYW5kbGVyIGZvciB0aGUgb24gbmV4dCBldmVudC5cclxuICogVXBkYXRlcyBmaXJlY3QgdmlldyBpZiB1cGRhdGUgaXMgYXZhaWxhYmxlLlxyXG4gKiBcclxuICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gKi9cclxuZm9yZWNhc3RFdmVudEhhbmRsZXJzLm9uTmV4dCA9ICgpID0+IHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBpZiAoY3VycmVudEZvcmNhc3RJbmRleCArIDEgPCBjdXJyZW50RGF0YS5yZXNwb25zZS5saXN0Lmxlbmd0aCkge1xyXG4gICAgICAgIGN1cnJlbnRGb3JjYXN0SW5kZXgrKztcclxuICAgICAgICB1cGRhdGVGb3JlY2FzdFZpZXcoY3VycmVudERhdGEpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEEgaGFuZGxlciBmb3IgdGhlIG9uIHByZXYgZXZlbnQuXHJcbiAqIFVwZGF0ZXMgZmlyZWN0IHZpZXcgaWYgdXBkYXRlIGlzIGF2YWlsYWJsZS5cclxuICogXHJcbiAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICovXHJcbmZvcmVjYXN0RXZlbnRIYW5kbGVycy5vblByZXYgPSAoKSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgaWYgKGN1cnJlbnRGb3JjYXN0SW5kZXggLSAxID4gMCkge1xyXG4gICAgICAgIGN1cnJlbnRGb3JjYXN0SW5kZXgtLTtcclxuICAgICAgICB1cGRhdGVGb3JlY2FzdFZpZXcoY3VycmVudERhdGEpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLy8gaW5pdFxyXG5nZXRGb3JlY2FzdCgpXHJcbiAgICAudGhlbigoZm9yZWNhc3REYXRhKSA9PiB7XHJcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgICAgICAvLyByZWZyZXNoIGRhdGFcclxuICAgICAgICBjdXJyZW50RGF0YSA9IGZvcmVjYXN0RGF0YTtcclxuICAgICAgICAvLyByZXNldCBpbmRleFxyXG4gICAgICAgIGN1cnJlbnRGb3JjYXN0SW5kZXggPSAwO1xyXG4gICAgICAgIHVwZGF0ZUZvcmVjYXN0VmlldyhjdXJyZW50RGF0YSk7XHJcbiAgICB9KTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9hcHAuY29udHJvbGxlcnMuanNcbiAqKi8iLCJpbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZy5qcyc7XHJcbmltcG9ydCB7SU1QRVJJQUwsIE1FVFJJQ30gZnJvbSAnLi4vY29uc3RhbnRzLmpzJztcclxuXHJcbi8qKlxyXG4gKiBQYXJzZSBhbmQgcmV0dXJuIGFuIEFQSSBxdWVyeSBVUkwuXHJcbiAqIFxyXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGNpdHkgICAgdGhlIG5hbWUgb2YgYSBjaXR5XHJcbiAqIEBwYXJhbSAge1N0cmluZ30gY291bnRyeSB0aGUgbmFtZSBvZiBhIGNvdW50cnlcclxuICogQHBhcmFtICB7U3RyaW5nfSB1bml0cyAgIHVuaXRzIGZvcm1hdCwgZWl0aGVyIG1ldHJpYyBvciBpbXBlcmlhbFxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgdGhlIHBhcnNlZCB0ZW1wbGF0ZSBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGdldFF1ZXJ5VVJMKGNpdHksIGNvdW50cnksIHVuaXRzKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgcmV0dXJuIGBodHRwOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9mb3JlY2FzdD9xPSR7Y2l0eX0sJHtjb3VudHJ5fSZtb2RlPWpzb24mYXBwaWQ9JHtjb25maWcuYXBpS2V5fSZ1bml0cz0ke3VuaXRzfWA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgZm9yZWNhc3QgZGF0YSBmcm9tIGFwaSBmb3IgZ2l2ZW4gbG9jYXRpb24uXHJcbiAqIFxyXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGNpdHkgICAgdGhlIG5hbWUgb2YgYSBjaXR5LCBkZWZhdWx0cyB0byAnTG9uZG9uJ1xyXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGNvdW50cnkgdGhlIG5hbWUgb2YgYSBjb3VudHJ5LCBkZWZhdWx0cyB0byAnJ1xyXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHVuaXRzICAgdW5pdHMgZm9ybWF0LCBlaXRoZXIgbWV0cmljIG9yIGltcGVyaWFsLCBkZWZhdWx0cyB0byAnbWV0cmljJ1xyXG4gKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgICAgYSBQcm9taXNlIHRoYXQgZXZlbnR1YWxseSByZXR1cm5zIGEgY3VzdG9tIG9iamVjdCB3aXRoIHJlc3BvbnNlLCBhbmQgcXVlcnkgcGFyYW1ldGVycyBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JlY2FzdChjaXR5ID0gJ0xvbmRvbicsIGNvdW50cnkgPSAnJywgdW5pdHMgPSBNRVRSSUMpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjb25zdCBxdWVyeVVSTCA9IGdldFF1ZXJ5VVJMKGNpdHksIGNvdW50cnksIHVuaXRzKTtcclxuXHJcbiAgICByZXR1cm4gZmV0Y2gocXVlcnlVUkwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnZ2V0J1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHBhcnNlZERhdGEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3JpZ2luYWwgcmVzcG9uc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IHBhcnNlZERhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHF1ZXJ5IHBhcmFtcyBzZW50IHRvIEFQSVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHk6IGNpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudHJ5OiBjb3VudHJ5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdHM6IHVuaXRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB9KTtcclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9mb3JlY2FzdC9mb3JlY2FzdC5zZXJ2aWNlcy5qc1xuICoqLyIsImV4cG9ydCBkZWZhdWx0IHtcclxuICAgIGFwaUtleTogJzNmNjk3Njc1NDI0YzNkMGFmZWFmYmUwMjYxMGNlMjc0J1xyXG59O1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL2NvbmZpZy5qc1xuICoqLyIsImV4cG9ydCBjb25zdCBJTVBFUklBTCA9ICdpbXBlcmlhbCc7XHJcbmV4cG9ydCBjb25zdCBNRVRSSUMgPSAnbWV0cmljJztcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9jb25zdGFudHMuanNcbiAqKi8iLCJpbXBvcnQge01FVFJJQ30gZnJvbSAnLi9jb25zdGFudHMuanMnO1xyXG5cclxuZXhwb3J0IGxldCBhcHBFdmVudEhhbmRsZXJzID0ge1xyXG4gICAgb25TZWFyY2g6IG51bGwsXHJcbiAgICBvblJlZnJlc2g6IG51bGxcclxufTtcclxuXHJcbmNvbnN0IHNlYXJjaFRleHRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWFyY2hUZXh0Jyk7XHJcbmNvbnN0IHNlYXJjaEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWFyY2gnKTtcclxuY29uc3QgdW5pdHNDbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdW5pdHMnKTtcclxuXHJcbi8vIGRlZmF1bHRcclxubGV0IHVuaXRzRm9ybWF0ICA9IE1FVFJJQztcclxuXHJcbi8vIGEgYml0IG9mIGV2ZW50IGRlbGVnYXRpb25cclxudW5pdHNDbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXYpID0+IHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjb25zdCBub2RlTmFtZSA9IGV2LnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgIGlmIChub2RlTmFtZSA9PT0gJ2lucHV0Jykge1xyXG4gICAgICAgIHVuaXRzRm9ybWF0ID0gZXYudGFyZ2V0LnZhbHVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdW5pdHNGb3JtYXQgPSBldi50YXJnZXQuY29udHJvbC52YWx1ZTtcclxuICAgIH1cclxufSk7XHJcblxyXG4vLyBsaXN0ZW5zIGZvciB1c2VyJ3Mga2VwcmVzc2VzLCBhbmQgcGFzc2VzIGRhdGEgdG8gY29udHJvbGxlclxyXG5zZWFyY2hUZXh0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZXYpID0+IHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAvLyBvbmx5IG9uIGVudGVyXHJcbiAgICBpZiAoZXYua2V5Q29kZSA9PT0gMTMpIHtcclxuXHJcbiAgICAgICAgLy8gaWYgY2FsbGJhY2sgaXMgY29uZmlndXJlZFxyXG4gICAgICAgIGlmIChhcHBFdmVudEhhbmRsZXJzLm9uU2VhcmNoICYmIHNlYXJjaFRleHRJbnB1dC52YWx1ZSkge1xyXG4gICAgICAgICAgICBhcHBFdmVudEhhbmRsZXJzLm9uU2VhcmNoKHNlYXJjaFRleHRJbnB1dC52YWx1ZSwgdW5pdHNGb3JtYXQpO1xyXG5cclxuICAgICAgICAgICAgLy8gcmVzZXQgdGhlIHNlYXJjaCBpbnB1dFxyXG4gICAgICAgICAgICBzZWFyY2hUZXh0SW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8gbGlzdGVucyBmb3IgdXNlcidzIGNsaWNrcywgYW5kIHBhc3NlcyBkYXRhIHRvIGNvbnRyb2xsZXJcclxuc2VhcmNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8vIGlmIGNhbGxiYWNrIGlzIGNvbmZpZ3VyZWRcclxuICAgIGlmIChhcHBFdmVudEhhbmRsZXJzLm9uU2VhcmNoICYmIHNlYXJjaFRleHRJbnB1dC52YWx1ZSkge1xyXG4gICAgICAgIGFwcEV2ZW50SGFuZGxlcnMub25TZWFyY2goc2VhcmNoVGV4dElucHV0LnZhbHVlLCB1bml0c0Zvcm1hdCk7XHJcblxyXG4gICAgICAgIC8vIHJlc2V0IHRoZSBzZWFyY2ggaW5wdXRcclxuICAgICAgICBzZWFyY2hUZXh0SW5wdXQudmFsdWUgPSAnJztcclxuICAgIH1cclxufSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvYXBwLnZpZXdzLmpzXG4gKiovIiwiaW1wb3J0IHtJTVBFUklBTH0gZnJvbSAnLi4vY29uc3RhbnRzLmpzJztcclxuXHJcbmNvbnN0IGNpdHlDbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2l0eScpO1xyXG5jb25zdCByYWluQ250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJhaW4gPiBzcGFuJyk7XHJcbmNvbnN0IHRlbXBDbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcCA+IHNwYW4nKTtcclxuY29uc3QgcHJlc0NudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVzID4gc3BhbicpO1xyXG5jb25zdCBjbG91ZHNDbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvdWRzID4gc3BhbicpO1xyXG5jb25zdCBuZXh0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbnMgPiAubmV4dCcpO1xyXG5jb25zdCBwcmV2QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbnMgPiAucHJldicpO1xyXG5cclxuLyoqXHJcbiAqIFNcclxuICogQHBhcmFtICB7W3R5cGVdfSBvcHRpb25zLnJlc3BvbnNlIFtkZXNjcmlwdGlvbl1cclxuICogQHBhcmFtICB7W3R5cGVdfSBvcHRpb25zLnBhcmFtcyAgIFtkZXNjcmlwdGlvbl1cclxuICogQHJldHVybiB7W3R5cGVdfSAgICAgICAgICAgICAgICAgIFtkZXNjcmlwdGlvbl1cclxuICovXHJcbmZ1bmN0aW9uIHJlbmRlcih7cmVzcG9uc2UsIHBhcmFtc30pIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjb25zdCBzaW5nbGVGb3JlY2FzdCA9IHJlc3BvbnNlLnNpbmdsZUZvcmVjYXN0O1xyXG5cclxuICAgIGNpdHlDbnQuaW5uZXJIVE1MID0gYCR7cmVzcG9uc2UuY2l0eS5uYW1lfSwgJHtyZXNwb25zZS5jaXR5LmNvdW50cnl9YDtcclxuICAgIHJhaW5DbnQuaW5uZXJIVE1MID0gYCR7c2luZ2xlRm9yZWNhc3QucmFpbiAmJiBzaW5nbGVGb3JlY2FzdC5yYWluWyczaCddIHx8IDB9IG1tYDtcclxuICAgIHRlbXBDbnQuaW5uZXJIVE1MID0gYCR7TWF0aC5yb3VuZChzaW5nbGVGb3JlY2FzdC5tYWluLnRlbXApfSR7KHBhcmFtcy51bml0cyA9PT0gSU1QRVJJQUwgPyAnJmRlZztGJyA6ICcmZGVnO0MnKX1gO1xyXG4gICAgcHJlc0NudC5pbm5lckhUTUwgPSBgJHtNYXRoLnJvdW5kKHNpbmdsZUZvcmVjYXN0Lm1haW4ucHJlc3N1cmUpfSBoUGFgO1xyXG4gICAgY2xvdWRzQ250LmlubmVySFRNTCA9IGAke3NpbmdsZUZvcmVjYXN0LmNsb3Vkcy5hbGx9JWA7XHJcbn1cclxuXHJcbmV4cG9ydCBsZXQgZm9yZWNhc3RFdmVudEhhbmRsZXJzID0ge1xyXG5cclxuICAgIC8vIGEgcGFydCBvZiBmb3JlY2FzdCB2aWV3XHJcbiAgICBvbk5leHQ6IG51bGwsXHJcbiAgICBvblByZXY6IG51bGxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBbdXBkYXRlRm9yZWNhc3QgZGVzY3JpcHRpb25dXHJcbiAqIEBwYXJhbSAge1t0eXBlXX0gZm9yZWNhc3REYXRhIFtkZXNjcmlwdGlvbl1cclxuICogQHJldHVybiB7W3R5cGVdfSAgICAgICAgICAgICAgW2Rlc2NyaXB0aW9uXVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUZvcmVjYXN0KGZvcmVjYXN0RGF0YSkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHJlbmRlcihmb3JlY2FzdERhdGEpO1xyXG59XHJcblxyXG4vKipcclxuICogW2dldE5leHREYXRhIGRlc2NyaXB0aW9uXVxyXG4gKiBAcGFyYW0gIHtbdHlwZV19IG5leHREYXRhIFtkZXNjcmlwdGlvbl1cclxuICogQHJldHVybiB7W3R5cGVdfSAgICAgICAgICBbZGVzY3JpcHRpb25dXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV4dERhdGEobmV4dERhdGEpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJlbmRlcihuZXh0RGF0YSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBbZ2V0UHJldkRhdGEgZGVzY3JpcHRpb25dXHJcbiAqIEBwYXJhbSAge1t0eXBlXX0gcHJldkRhdGEgW2Rlc2NyaXB0aW9uXVxyXG4gKiBAcmV0dXJuIHtbdHlwZV19ICAgICAgICAgIFtkZXNjcmlwdGlvbl1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQcmV2RGF0YShwcmV2RGF0YSkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgcmVuZGVyKHByZXZEYXRhKTtcclxufVxyXG5cclxubmV4dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAvLyBpZiBjYWxsYmFjayBpcyBjb25maWd1cmVkXHJcbiAgICBpZiAoZm9yZWNhc3RFdmVudEhhbmRsZXJzLm9uTmV4dCkge1xyXG4gICAgICAgIGZvcmVjYXN0RXZlbnRIYW5kbGVycy5vbk5leHQoKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5wcmV2QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8vIGlmIGNhbGxiYWNrIGlzIGNvbmZpZ3VyZWRcclxuICAgIGlmIChmb3JlY2FzdEV2ZW50SGFuZGxlcnMub25QcmV2KSB7XHJcbiAgICAgICAgZm9yZWNhc3RFdmVudEhhbmRsZXJzLm9uUHJldigpO1xyXG4gICAgfVxyXG59KTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9mb3JlY2FzdC9mb3JlY2FzdC52aWV3cy5qc1xuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=
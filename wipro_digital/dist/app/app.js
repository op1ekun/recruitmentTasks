!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";n(1)},function(e,t,n){"use strict";function r(e){var t=e.params,n=e.response;(0,u.updateForecast)({params:t,response:{city:n.city,singleForecast:n.list[s]}})}var o=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(i){o=!0,a=i}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(2),c=n(5),u=n(6),i=void 0,s=0;c.appEventHandlers.onSearch=function(e,t){var n=e.split(","),c=o(n,2),u=c[0],l=c[1];(0,a.getForecast)(u,l,t).then(function(e){i=e,s=0,r(i)})},u.forecastEventHandlers.onNext=function(){s+1<i.response.list.length?(s++,u.controlsEnabled.next=!0,u.controlsEnabled.prev=!0):u.controlsEnabled.next=!1,r(i)},u.forecastEventHandlers.onPrev=function(){s-1>=0?(s--,u.controlsEnabled.next=!0,u.controlsEnabled.prev=!0):u.controlsEnabled.prev=!1,r(i)},(0,a.getForecast)().then(function(e){i=e,s=0,u.controlsEnabled.prev=!1,r(i)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return"http://api.openweathermap.org/data/2.5/forecast?q="+e+","+t+"&mode=json&appid="+u["default"].apiKey+"&units="+n}function a(){var e=arguments.length<=0||void 0===arguments[0]?"London":arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?i.METRIC:arguments[2],r=o(e,t,n);return fetch(r,{method:"get"}).then(function(r){return r.json().then(function(r){return{response:r,params:{city:e,country:t,units:n}}})})["catch"](function(e){console.error(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getForecast=a;var c=n(3),u=r(c),i=n(4)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={apiKey:"3f697675424c3d0afeafbe02610ce274"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.IMPERIAL="imperial",t.METRIC="metric"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appEventHandlers=void 0;var r=n(4),o=t.appEventHandlers={onSearch:null,onRefresh:null},a=document.querySelector("#searchText"),c=document.querySelector("#search"),u=document.querySelector("#units"),i=r.METRIC;u.addEventListener("click",function(e){var t=e.target.nodeName.toLowerCase();i="input"===t?e.target.value:e.target.control.value}),a.addEventListener("keypress",function(e){13===e.keyCode&&o.onSearch&&a.value&&(o.onSearch(a.value,i),a.value="")}),c.addEventListener("click",function(){o.onSearch&&a.value&&(o.onSearch(a.value,i),a.value="")})},function(e,t,n){"use strict";function r(e){var t=e.response,n=e.params,r=t.city,o=r.name,a=r.country,c=t.singleForecast,E=c.rain,g=c.main,M=c.clouds,b=c.dt,S=new Date(1e3*b),x=S.getUTCFullYear(),T=S.getUTCDate();T=10>T?"0"+T:T;var L=S.getUTCMonth()+1;L=10>L?"0"+L:L;var H=S.getUTCHours();H=10>H?"0"+H:H;var q=S.getUTCMinutes();q=10>q?"0"+q:q;var P=S.getUTCSeconds();P=10>P?"0"+P:P,i.innerHTML=o+", "+a,s.innerHTML=(E&&E["3h"]||0)+" mm",l.innerHTML=""+Math.round(g.temp)+(n.units===u.IMPERIAL?"&deg;F":"&deg;C"),d.innerHTML=Math.round(g.pressure)+" hPa",v.innerHTML=M.all+"%",f.innerHTML=T+"/"+L+"/"+x,p.innerHTML=H+":"+q+":"+P,y.disabled=!m.next,h.disabled=!m.prev}function o(e){r(e)}function a(e){r(e)}function c(e){r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.forecastEventHandlers=t.controlsEnabled=void 0,t.updateForecast=o,t.getNextData=a,t.getPrevData=c;var u=n(4),i=document.querySelector(".city"),s=document.querySelector(".rain > span"),l=document.querySelector(".temp > span"),d=document.querySelector(".pres > span"),v=document.querySelector(".clouds > span"),f=document.querySelector(".time > h2"),p=document.querySelector(".time > h3"),y=document.querySelector(".actions > .next"),h=document.querySelector(".actions > .prev"),m=t.controlsEnabled={next:!0,prev:!0},E=t.forecastEventHandlers={onNext:null,onPrev:null};y.addEventListener("click",function(){E.onNext&&E.onNext()}),h.addEventListener("click",function(){E.onPrev&&E.onPrev()})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL2FwcC5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNjk1NDM3ZGMzNmI3NDMxOTc5NjYiLCJ3ZWJwYWNrOi8vLy4vYXBwL2FwcC5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvYXBwLmNvbnRyb2xsZXJzLmpzIiwid2VicGFjazovLy8uL2FwcC9mb3JlY2FzdC9mb3JlY2FzdC5zZXJ2aWNlcy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvY29uZmlnLmpzIiwid2VicGFjazovLy8uL2FwcC9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2FwcC52aWV3cy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvZm9yZWNhc3QvZm9yZWNhc3Qudmlld3MuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwidXBkYXRlRm9yZWNhc3RWaWV3IiwiX3JlZiIsInBhcmFtcyIsInJlc3BvbnNlIiwiX2ZvcmVjYXN0Vmlld3MiLCJ1cGRhdGVGb3JlY2FzdCIsImNpdHkiLCJzaW5nbGVGb3JlY2FzdCIsImxpc3QiLCJjdXJyZW50Rm9yY2FzdEluZGV4IiwiX3NsaWNlZFRvQXJyYXkiLCJzbGljZUl0ZXJhdG9yIiwiYXJyIiwiaSIsIl9hcnIiLCJfbiIsIl9kIiwiX2UiLCJ1bmRlZmluZWQiLCJfcyIsIl9pIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInB1c2giLCJ2YWx1ZSIsImxlbmd0aCIsImVyciIsIkFycmF5IiwiaXNBcnJheSIsIk9iamVjdCIsIlR5cGVFcnJvciIsIl9mb3JlY2FzdFNlcnZpY2VzIiwiX2FwcFZpZXdzIiwiY3VycmVudERhdGEiLCJhcHBFdmVudEhhbmRsZXJzIiwib25TZWFyY2giLCJzZWFyY2hUZXh0IiwidW5pdHMiLCJfc2VhcmNoVGV4dCRzcGxpdCIsInNwbGl0IiwiX3NlYXJjaFRleHQkc3BsaXQyIiwiY291bnRyeSIsImdldEZvcmVjYXN0IiwidGhlbiIsImZvcmVjYXN0RGF0YSIsImZvcmVjYXN0RXZlbnRIYW5kbGVycyIsIm9uTmV4dCIsImNvbnRyb2xzRW5hYmxlZCIsInByZXYiLCJvblByZXYiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJnZXRRdWVyeVVSTCIsIl9jb25maWcyIiwiYXBpS2V5IiwiYXJndW1lbnRzIiwiX2NvbnN0YW50cyIsIk1FVFJJQyIsInF1ZXJ5VVJMIiwiZmV0Y2giLCJtZXRob2QiLCJqc29uIiwicGFyc2VkRGF0YSIsImNvbnNvbGUiLCJlcnJvciIsImRlZmluZVByb3BlcnR5IiwiX2NvbmZpZyIsIklNUEVSSUFMIiwib25SZWZyZXNoIiwic2VhcmNoVGV4dElucHV0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2VhcmNoQnV0dG9uIiwidW5pdHNDbnQiLCJ1bml0c0Zvcm1hdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldiIsIm5vZGVOYW1lIiwidGFyZ2V0IiwidG9Mb3dlckNhc2UiLCJjb250cm9sIiwia2V5Q29kZSIsInJlbmRlciIsIl9yZXNwb25zZSRjaXR5IiwibmFtZSIsIl9yZXNwb25zZSRzaW5nbGVGb3JlYyIsInJhaW4iLCJtYWluIiwiY2xvdWRzIiwiZHQiLCJkYXRlIiwiRGF0ZSIsInllYXIiLCJnZXRVVENGdWxsWWVhciIsImRheSIsImdldFVUQ0RhdGUiLCJtb250aCIsImdldFVUQ01vbnRoIiwiaG91cnMiLCJnZXRVVENIb3VycyIsIm1pbnV0ZXMiLCJnZXRVVENNaW51dGVzIiwic2Vjb25kcyIsImdldFVUQ1NlY29uZHMiLCJjaXR5Q250IiwiaW5uZXJIVE1MIiwicmFpbkNudCIsInRlbXBDbnQiLCJNYXRoIiwicm91bmQiLCJ0ZW1wIiwicHJlc0NudCIsInByZXNzdXJlIiwiY2xvdWRzQ250IiwiYWxsIiwiZGF0ZUNudCIsInRpbWVDbnQiLCJuZXh0QnV0dG9uIiwiZGlzYWJsZWQiLCJwcmV2QnV0dG9uIiwiZ2V0TmV4dERhdGEiLCJuZXh0RGF0YSIsImdldFByZXZEYXRhIiwicHJldkRhdGEiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBcUNBLE9BVEFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsR0FHQVYsRUFBQSxLRE1NLFNBQVNJLEVBQVFELEVBQVNILEdBRS9CLFlFN0NEQSxHQUFBLElGbURNLFNBQVNJLEVBQVFELEVBQVNILEdBRS9CLFlHdkNELFNBQVNXLEdBQVRDLEdIK0RLLEdHL0R3QkMsR0FBQUQsRUFBQUMsT0FBUUMsRUFBQUYsRUFBQUUsVUFHakMsRUFBQUMsRUFBQUMsaUJBQ0lILE9BQVFBLEVBQ1JDLFVBQ0lHLEtBQU1ILEVBQVNHLEtBQ2ZDLGVBQWdCSixFQUFTSyxLQUFLQyxNSGtDekMsR0FBSUMsR0FBaUIsV0FBYyxRQUFTQyxHQUFjQyxFQUFLQyxHQUFLLEdBQUlDLE1BQWVDLEdBQUssRUFBVUMsR0FBSyxFQUFXQyxFQUFLQyxNQUFXLEtBQU0sSUFBSyxHQUFpQ0MsR0FBN0JDLEVBQUtSLEVBQUlTLE9BQU9DLGNBQW1CUCxHQUFNSSxFQUFLQyxFQUFHRyxRQUFRQyxRQUFvQlYsRUFBS1csS0FBS04sRUFBR08sUUFBWWIsR0FBS0MsRUFBS2EsU0FBV2QsR0FBM0RFLEdBQUssSUFBb0UsTUFBT2EsR0FBT1osR0FBSyxFQUFNQyxFQUFLVyxFQUFPLFFBQVUsS0FBV2IsR0FB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ZTdFLEVBQVMsY0FDM0JrQyxPQUFPLElBRVhsQyxFQUFRdUQsc0JBQXdCdkQsRUFBUXlELGdCQUFrQi9CLE9BQzFEMUIsRVEvUWVhLGlCUmdSZmIsRVF0UWVvSSxjUnVRZnBJLEVRN1Blc0ksYUFoR2hCLElBQUFsRSxHQUFBdkUsRUFBQSxHQUVNdUgsRUFBVWxDLFNBQVNDLGNBQWMsU0FDakNtQyxFQUFVcEMsU0FBU0MsY0FBYyxnQkFDakNvQyxFQUFVckMsU0FBU0MsY0FBYyxnQkFDakN3QyxFQUFVekMsU0FBU0MsY0FBYyxnQkFDakMwQyxFQUFZM0MsU0FBU0MsY0FBYyxrQkFDbkM0QyxFQUFVN0MsU0FBU0MsY0FBYyxjQUNqQzZDLEVBQVU5QyxTQUFTQyxjQUFjLGNBQ2pDOEMsRUFBYS9DLFNBQVNDLGNBQWMsb0JBQ3BDZ0QsRUFBYWpELFNBQVNDLGNBQWMsb0JBRS9CMUIsRUFBQXpELEVBQUF5RCxpQkFDUDFCLE1BQU0sRUFDTjJCLE1BQU0sR0FHQ0gsRUFBQXZELEVBQUF1RCx1QkFDUEMsT0FBUSxLQUNSRyxPQUFRLEtBa0Zac0UsR0FBVzFDLGlCQUFpQixRQUFTLFdBSTdCaEMsRUFBc0JDLFFBQ3RCRCxFQUFzQkMsV0FJOUIyRSxFQUFXNUMsaUJBQWlCLFFBQVMsV0FJN0JoQyxFQUFzQkksUUFDdEJKLEVBQXNCSSIsImZpbGUiOiJhcHAvYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9zbGljZWRUb0FycmF5ID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7IH0gfTsgfSgpO1xuXHRcblx0dmFyIF9mb3JlY2FzdFNlcnZpY2VzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfYXBwVmlld3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9mb3JlY2FzdFZpZXdzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdC8vIGhvbGRzIGN1cnJlbnQgZm9yZWNhc3QgZGF0YSBmb3JtIEFQSVxuXHR2YXIgY3VycmVudERhdGEgPSB2b2lkIDA7XG5cdC8vIHRoZSBpbmRleCBvZiB0aGUgY3VycmVudCAoc2luZ2xlKSBmb3JlY2FzdFxuXHR2YXIgY3VycmVudEZvcmNhc3RJbmRleCA9IDA7XG5cdFxuXHQvKipcclxuXHQgKiBQcmVwYXJlcyBkYXRhIGZvciB0aGUgdmlldywgYW5kIGFuZCB1cGRhdGVzIGl0LlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSAge09iamVjdH0gZm9yZWNhc3REYXRhICAgIGJlc3Bva2UgZGF0YSBvYmplY3QgY29udGFpbmluZyBib3RoIHRoZSBvcmlnaW5hbCByZXNwb25zZSBhbmQgcXVlcnkgcGFyYW1zXHJcblx0ICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG5cdCAqL1xuXHRmdW5jdGlvbiB1cGRhdGVGb3JlY2FzdFZpZXcoX3JlZikge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIHZhciBwYXJhbXMgPSBfcmVmLnBhcmFtcztcblx0ICAgIHZhciByZXNwb25zZSA9IF9yZWYucmVzcG9uc2U7XG5cdCAgICAoMCwgX2ZvcmVjYXN0Vmlld3MudXBkYXRlRm9yZWNhc3QpKHtcblx0ICAgICAgICBwYXJhbXM6IHBhcmFtcyxcblx0ICAgICAgICByZXNwb25zZToge1xuXHQgICAgICAgICAgICBjaXR5OiByZXNwb25zZS5jaXR5LFxuXHQgICAgICAgICAgICBzaW5nbGVGb3JlY2FzdDogcmVzcG9uc2UubGlzdFtjdXJyZW50Rm9yY2FzdEluZGV4XVxuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHR9XG5cdFxuXHQvKipcclxuXHQgKiBBIGhhbmRsZXIgZm9yIHRoZSBvbiBzZWFyY2ggZXZlbnQuXHJcblx0ICogQ2FsbHMgc2VydmljZSBtZXRob2QgdG8gZ2V0IGZvcmVjYXN0IGRhdGEgZnJvbSBBUEkuXHJcblx0ICogXHJcblx0ICogQHBhcmFtICB7U3RyaW5nfSBzZWFyY2hUZXh0ICB0aGUgdGV4dCB0aGF0IHVzZXIgZW50ZXJlZCBpbiB0aGUgc2VhcmNoIGJveFxyXG5cdCAqIEBwYXJhbSAge1N0cmluZ30gdW5pdHMgICAgICAgZWl0aGVyICdtZXRyaWMnIG9yICdpbXBlcmlhbCdcclxuXHQgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcblx0ICovXG5cdF9hcHBWaWV3cy5hcHBFdmVudEhhbmRsZXJzLm9uU2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaFRleHQsIHVuaXRzKSB7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdFxuXHQgICAgdmFyIF9zZWFyY2hUZXh0JHNwbGl0ID0gc2VhcmNoVGV4dC5zcGxpdCgnLCcpO1xuXHRcblx0ICAgIHZhciBfc2VhcmNoVGV4dCRzcGxpdDIgPSBfc2xpY2VkVG9BcnJheShfc2VhcmNoVGV4dCRzcGxpdCwgMik7XG5cdFxuXHQgICAgdmFyIGNpdHkgPSBfc2VhcmNoVGV4dCRzcGxpdDJbMF07XG5cdCAgICB2YXIgY291bnRyeSA9IF9zZWFyY2hUZXh0JHNwbGl0MlsxXTtcblx0XG5cdFxuXHQgICAgKDAsIF9mb3JlY2FzdFNlcnZpY2VzLmdldEZvcmVjYXN0KShjaXR5LCBjb3VudHJ5LCB1bml0cykudGhlbihmdW5jdGlvbiAoZm9yZWNhc3REYXRhKSB7XG5cdCAgICAgICAgLy8gcmVmcmVzaCBkYXRhXG5cdCAgICAgICAgY3VycmVudERhdGEgPSBmb3JlY2FzdERhdGE7XG5cdCAgICAgICAgLy8gcmVzZXQgaW5kZXhcblx0ICAgICAgICBjdXJyZW50Rm9yY2FzdEluZGV4ID0gMDtcblx0ICAgICAgICB1cGRhdGVGb3JlY2FzdFZpZXcoY3VycmVudERhdGEpO1xuXHQgICAgfSk7XG5cdH07XG5cdFxuXHQvKipcclxuXHQgKiBBIGhhbmRsZXIgZm9yIHRoZSBvbiBuZXh0IGV2ZW50LlxyXG5cdCAqIFVwZGF0ZXMgZmlyZWN0IHZpZXcgaWYgdXBkYXRlIGlzIGF2YWlsYWJsZS5cclxuXHQgKiBcclxuXHQgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcblx0ICovXG5cdF9mb3JlY2FzdFZpZXdzLmZvcmVjYXN0RXZlbnRIYW5kbGVycy5vbk5leHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdFxuXHQgICAgaWYgKGN1cnJlbnRGb3JjYXN0SW5kZXggKyAxIDwgY3VycmVudERhdGEucmVzcG9uc2UubGlzdC5sZW5ndGgpIHtcblx0ICAgICAgICBjdXJyZW50Rm9yY2FzdEluZGV4Kys7XG5cdCAgICAgICAgX2ZvcmVjYXN0Vmlld3MuY29udHJvbHNFbmFibGVkLm5leHQgPSB0cnVlO1xuXHQgICAgICAgIF9mb3JlY2FzdFZpZXdzLmNvbnRyb2xzRW5hYmxlZC5wcmV2ID0gdHJ1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgX2ZvcmVjYXN0Vmlld3MuY29udHJvbHNFbmFibGVkLm5leHQgPSBmYWxzZTtcblx0ICAgIH1cblx0XG5cdCAgICB1cGRhdGVGb3JlY2FzdFZpZXcoY3VycmVudERhdGEpO1xuXHR9O1xuXHRcblx0LyoqXHJcblx0ICogQSBoYW5kbGVyIGZvciB0aGUgb24gcHJldiBldmVudC5cclxuXHQgKiBVcGRhdGVzIGZpcmVjdCB2aWV3IGlmIHVwZGF0ZSBpcyBhdmFpbGFibGUuXHJcblx0ICogXHJcblx0ICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG5cdCAqL1xuXHRfZm9yZWNhc3RWaWV3cy5mb3JlY2FzdEV2ZW50SGFuZGxlcnMub25QcmV2ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIGlmIChjdXJyZW50Rm9yY2FzdEluZGV4IC0gMSA+PSAwKSB7XG5cdCAgICAgICAgY3VycmVudEZvcmNhc3RJbmRleC0tO1xuXHQgICAgICAgIF9mb3JlY2FzdFZpZXdzLmNvbnRyb2xzRW5hYmxlZC5uZXh0ID0gdHJ1ZTtcblx0ICAgICAgICBfZm9yZWNhc3RWaWV3cy5jb250cm9sc0VuYWJsZWQucHJldiA9IHRydWU7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIF9mb3JlY2FzdFZpZXdzLmNvbnRyb2xzRW5hYmxlZC5wcmV2ID0gZmFsc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgdXBkYXRlRm9yZWNhc3RWaWV3KGN1cnJlbnREYXRhKTtcblx0fTtcblx0XG5cdC8vIGluaXRcblx0KDAsIF9mb3JlY2FzdFNlcnZpY2VzLmdldEZvcmVjYXN0KSgpLnRoZW4oZnVuY3Rpb24gKGZvcmVjYXN0RGF0YSkge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIC8vIHJlZnJlc2ggZGF0YVxuXHRcblx0ICAgIGN1cnJlbnREYXRhID0gZm9yZWNhc3REYXRhO1xuXHQgICAgLy8gcmVzZXQgaW5kZXhcblx0ICAgIGN1cnJlbnRGb3JjYXN0SW5kZXggPSAwO1xuXHRcblx0ICAgIF9mb3JlY2FzdFZpZXdzLmNvbnRyb2xzRW5hYmxlZC5wcmV2ID0gZmFsc2U7XG5cdCAgICB1cGRhdGVGb3JlY2FzdFZpZXcoY3VycmVudERhdGEpO1xuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZ2V0Rm9yZWNhc3QgPSBnZXRGb3JlY2FzdDtcblx0XG5cdHZhciBfY29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfY29uZmlnMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbmZpZyk7XG5cdFxuXHR2YXIgX2NvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0LyoqXHJcblx0ICogUGFyc2UgYW5kIHJldHVybiBhbiBBUEkgcXVlcnkgVVJMLlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSAge1N0cmluZ30gY2l0eSAgICB0aGUgbmFtZSBvZiBhIGNpdHlcclxuXHQgKiBAcGFyYW0gIHtTdHJpbmd9IGNvdW50cnkgdGhlIG5hbWUgb2YgYSBjb3VudHJ5XHJcblx0ICogQHBhcmFtICB7U3RyaW5nfSB1bml0cyAgIHVuaXRzIGZvcm1hdCwgZWl0aGVyIG1ldHJpYyBvciBpbXBlcmlhbFxyXG5cdCAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICB0aGUgcGFyc2VkIHRlbXBsYXRlIHN0cmluZ1xyXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRRdWVyeVVSTChjaXR5LCBjb3VudHJ5LCB1bml0cykge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIHJldHVybiAnaHR0cDovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvZm9yZWNhc3Q/cT0nICsgY2l0eSArICcsJyArIGNvdW50cnkgKyAnJm1vZGU9anNvbiZhcHBpZD0nICsgX2NvbmZpZzIuZGVmYXVsdC5hcGlLZXkgKyAnJnVuaXRzPScgKyB1bml0cztcblx0fVxuXHRcblx0LyoqXHJcblx0ICogR2V0IGZvcmVjYXN0IGRhdGEgZnJvbSBhcGkgZm9yIGdpdmVuIGxvY2F0aW9uLlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSAge1N0cmluZ30gY2l0eSAgICB0aGUgbmFtZSBvZiBhIGNpdHksIGRlZmF1bHRzIHRvICdMb25kb24nXHJcblx0ICogQHBhcmFtICB7U3RyaW5nfSBjb3VudHJ5IHRoZSBuYW1lIG9mIGEgY291bnRyeSwgZGVmYXVsdHMgdG8gJydcclxuXHQgKiBAcGFyYW0gIHtTdHJpbmd9IHVuaXRzICAgdW5pdHMgZm9ybWF0LCBlaXRoZXIgbWV0cmljIG9yIGltcGVyaWFsLCBkZWZhdWx0cyB0byAnbWV0cmljJ1xyXG5cdCAqIEByZXR1cm4ge1Byb21pc2V9ICAgICAgICBhIFByb21pc2UgdGhhdCBldmVudHVhbGx5IHJldHVybnMgYSBjdXN0b20gb2JqZWN0IHdpdGggcmVzcG9uc2UsIGFuZCBxdWVyeSBwYXJhbWV0ZXJzIFxyXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRGb3JlY2FzdCgpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICB2YXIgY2l0eSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/ICdMb25kb24nIDogYXJndW1lbnRzWzBdO1xuXHQgICAgdmFyIGNvdW50cnkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1sxXTtcblx0ICAgIHZhciB1bml0cyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IF9jb25zdGFudHMuTUVUUklDIDogYXJndW1lbnRzWzJdO1xuXHQgICAgdmFyIHF1ZXJ5VVJMID0gZ2V0UXVlcnlVUkwoY2l0eSwgY291bnRyeSwgdW5pdHMpO1xuXHRcblx0ICAgIHJldHVybiBmZXRjaChxdWVyeVVSTCwge1xuXHQgICAgICAgIG1ldGhvZDogJ2dldCdcblx0ICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFxuXHQgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkudGhlbihmdW5jdGlvbiAocGFyc2VkRGF0YSkge1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgICAgIC8vIG9yaWdpbmFsIHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICByZXNwb25zZTogcGFyc2VkRGF0YSxcblx0ICAgICAgICAgICAgICAgIC8vIHF1ZXJ5IHBhcmFtcyBzZW50IHRvIEFQSVxuXHQgICAgICAgICAgICAgICAgcGFyYW1zOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2l0eTogY2l0eSxcblx0ICAgICAgICAgICAgICAgICAgICBjb3VudHJ5OiBjb3VudHJ5LFxuXHQgICAgICAgICAgICAgICAgICAgIHVuaXRzOiB1bml0c1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH0pO1xuXHQgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcblx0ICAgIH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgICBhcGlLZXk6ICczZjY5NzY3NTQyNGMzZDBhZmVhZmJlMDI2MTBjZTI3NCdcblx0fTtcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHR2YXIgSU1QRVJJQUwgPSBleHBvcnRzLklNUEVSSUFMID0gJ2ltcGVyaWFsJztcblx0dmFyIE1FVFJJQyA9IGV4cG9ydHMuTUVUUklDID0gJ21ldHJpYyc7XG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmFwcEV2ZW50SGFuZGxlcnMgPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgX2NvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgYXBwRXZlbnRIYW5kbGVycyA9IGV4cG9ydHMuYXBwRXZlbnRIYW5kbGVycyA9IHtcblx0ICAgIG9uU2VhcmNoOiBudWxsLFxuXHQgICAgb25SZWZyZXNoOiBudWxsXG5cdH07XG5cdFxuXHR2YXIgc2VhcmNoVGV4dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlYXJjaFRleHQnKTtcblx0dmFyIHNlYXJjaEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWFyY2gnKTtcblx0dmFyIHVuaXRzQ250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VuaXRzJyk7XG5cdFxuXHQvLyBkZWZhdWx0XG5cdHZhciB1bml0c0Zvcm1hdCA9IF9jb25zdGFudHMuTUVUUklDO1xuXHRcblx0Ly8gYSBiaXQgb2YgZXZlbnQgZGVsZWdhdGlvblxuXHR1bml0c0NudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldikge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIHZhciBub2RlTmFtZSA9IGV2LnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcblx0ICAgIGlmIChub2RlTmFtZSA9PT0gJ2lucHV0Jykge1xuXHQgICAgICAgIHVuaXRzRm9ybWF0ID0gZXYudGFyZ2V0LnZhbHVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICB1bml0c0Zvcm1hdCA9IGV2LnRhcmdldC5jb250cm9sLnZhbHVlO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8vIGxpc3RlbnMgZm9yIHVzZXIncyBrZXByZXNzZXMsIGFuZCBwYXNzZXMgZGF0YSB0byBjb250cm9sbGVyXG5cdHNlYXJjaFRleHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChldikge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIC8vIG9ubHkgb24gZW50ZXJcblx0XG5cdCAgICBpZiAoZXYua2V5Q29kZSA9PT0gMTMpIHtcblx0XG5cdCAgICAgICAgLy8gaWYgY2FsbGJhY2sgaXMgY29uZmlndXJlZFxuXHQgICAgICAgIGlmIChhcHBFdmVudEhhbmRsZXJzLm9uU2VhcmNoICYmIHNlYXJjaFRleHRJbnB1dC52YWx1ZSkge1xuXHQgICAgICAgICAgICBhcHBFdmVudEhhbmRsZXJzLm9uU2VhcmNoKHNlYXJjaFRleHRJbnB1dC52YWx1ZSwgdW5pdHNGb3JtYXQpO1xuXHRcblx0ICAgICAgICAgICAgLy8gcmVzZXQgdGhlIHNlYXJjaCBpbnB1dFxuXHQgICAgICAgICAgICBzZWFyY2hUZXh0SW5wdXQudmFsdWUgPSAnJztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0Ly8gbGlzdGVucyBmb3IgdXNlcidzIGNsaWNrcywgYW5kIHBhc3NlcyBkYXRhIHRvIGNvbnRyb2xsZXJcblx0c2VhcmNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIC8vIGlmIGNhbGxiYWNrIGlzIGNvbmZpZ3VyZWRcblx0XG5cdCAgICBpZiAoYXBwRXZlbnRIYW5kbGVycy5vblNlYXJjaCAmJiBzZWFyY2hUZXh0SW5wdXQudmFsdWUpIHtcblx0ICAgICAgICBhcHBFdmVudEhhbmRsZXJzLm9uU2VhcmNoKHNlYXJjaFRleHRJbnB1dC52YWx1ZSwgdW5pdHNGb3JtYXQpO1xuXHRcblx0ICAgICAgICAvLyByZXNldCB0aGUgc2VhcmNoIGlucHV0XG5cdCAgICAgICAgc2VhcmNoVGV4dElucHV0LnZhbHVlID0gJyc7XG5cdCAgICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5mb3JlY2FzdEV2ZW50SGFuZGxlcnMgPSBleHBvcnRzLmNvbnRyb2xzRW5hYmxlZCA9IHVuZGVmaW5lZDtcblx0ZXhwb3J0cy51cGRhdGVGb3JlY2FzdCA9IHVwZGF0ZUZvcmVjYXN0O1xuXHRleHBvcnRzLmdldE5leHREYXRhID0gZ2V0TmV4dERhdGE7XG5cdGV4cG9ydHMuZ2V0UHJldkRhdGEgPSBnZXRQcmV2RGF0YTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBjaXR5Q250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNpdHknKTtcblx0dmFyIHJhaW5DbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmFpbiA+IHNwYW4nKTtcblx0dmFyIHRlbXBDbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcCA+IHNwYW4nKTtcblx0dmFyIHByZXNDbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJlcyA+IHNwYW4nKTtcblx0dmFyIGNsb3Vkc0NudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbG91ZHMgPiBzcGFuJyk7XG5cdHZhciBkYXRlQ250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpbWUgPiBoMicpO1xuXHR2YXIgdGltZUNudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW1lID4gaDMnKTtcblx0dmFyIG5leHRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aW9ucyA+IC5uZXh0Jyk7XG5cdHZhciBwcmV2QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbnMgPiAucHJldicpO1xuXHRcblx0dmFyIGNvbnRyb2xzRW5hYmxlZCA9IGV4cG9ydHMuY29udHJvbHNFbmFibGVkID0ge1xuXHQgICAgbmV4dDogdHJ1ZSxcblx0ICAgIHByZXY6IHRydWVcblx0fTtcblx0XG5cdHZhciBmb3JlY2FzdEV2ZW50SGFuZGxlcnMgPSBleHBvcnRzLmZvcmVjYXN0RXZlbnRIYW5kbGVycyA9IHtcblx0ICAgIG9uTmV4dDogbnVsbCxcblx0ICAgIG9uUHJldjogbnVsbFxuXHR9O1xuXHRcblx0LyoqXHJcblx0ICogUmVuZGVycyB2YWx1c2UgaW50byB0aGUgaHRtbCB1c2luZyBodG1sIHRlbXBsYXRlIHN0cmluZ3MuXHJcblx0ICogXHJcblx0ICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25zLnJlc3BvbnNlICAgIHRoZSByZXNwb25zZSBvYmplY3QgZm9yIGEgc2luZ2xlIGZvcmVjYXN0XHJcblx0ICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25zLnBhcmFtcyAgICAgIHRoZWUgcXVlcnkgcGFyYW1ldGVyc1xyXG5cdCAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuXHQgKi9cblx0ZnVuY3Rpb24gcmVuZGVyKF9yZWYpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICB2YXIgcmVzcG9uc2UgPSBfcmVmLnJlc3BvbnNlO1xuXHQgICAgdmFyIHBhcmFtcyA9IF9yZWYucGFyYW1zO1xuXHQgICAgdmFyIF9yZXNwb25zZSRjaXR5ID0gcmVzcG9uc2UuY2l0eTtcblx0ICAgIHZhciBuYW1lID0gX3Jlc3BvbnNlJGNpdHkubmFtZTtcblx0ICAgIHZhciBjb3VudHJ5ID0gX3Jlc3BvbnNlJGNpdHkuY291bnRyeTtcblx0ICAgIHZhciBfcmVzcG9uc2Ukc2luZ2xlRm9yZWMgPSByZXNwb25zZS5zaW5nbGVGb3JlY2FzdDtcblx0ICAgIHZhciByYWluID0gX3Jlc3BvbnNlJHNpbmdsZUZvcmVjLnJhaW47XG5cdCAgICB2YXIgbWFpbiA9IF9yZXNwb25zZSRzaW5nbGVGb3JlYy5tYWluO1xuXHQgICAgdmFyIGNsb3VkcyA9IF9yZXNwb25zZSRzaW5nbGVGb3JlYy5jbG91ZHM7XG5cdCAgICB2YXIgZHQgPSBfcmVzcG9uc2Ukc2luZ2xlRm9yZWMuZHQ7XG5cdFxuXHQgICAgLy8gY29udmVydCBVTklYIHRpbWVzdGFtcCB0byBtaWxsaXNlY29uZHNcblx0XG5cdCAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGR0ICogMTAwMCk7XG5cdCAgICB2YXIgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcblx0XG5cdCAgICAvLyBwYXJzaW5nIGRhdGUgLSB1Z2hcblx0ICAgIHZhciBkYXkgPSBkYXRlLmdldFVUQ0RhdGUoKTtcblx0ICAgIGRheSA9IGRheSA8IDEwID8gJzAnICsgZGF5IDogZGF5O1xuXHRcblx0ICAgIHZhciBtb250aCA9IGRhdGUuZ2V0VVRDTW9udGgoKSArIDE7XG5cdCAgICBtb250aCA9IG1vbnRoIDwgMTAgPyAnMCcgKyBtb250aCA6IG1vbnRoO1xuXHRcblx0ICAgIHZhciBob3VycyA9IGRhdGUuZ2V0VVRDSG91cnMoKTtcblx0ICAgIGhvdXJzID0gaG91cnMgPCAxMCA/ICcwJyArIGhvdXJzIDogaG91cnM7XG5cdFxuXHQgICAgdmFyIG1pbnV0ZXMgPSBkYXRlLmdldFVUQ01pbnV0ZXMoKTtcblx0ICAgIG1pbnV0ZXMgPSBtaW51dGVzIDwgMTAgPyAnMCcgKyBtaW51dGVzIDogbWludXRlcztcblx0XG5cdCAgICB2YXIgc2Vjb25kcyA9IGRhdGUuZ2V0VVRDU2Vjb25kcygpO1xuXHQgICAgc2Vjb25kcyA9IHNlY29uZHMgPCAxMCA/ICcwJyArIHNlY29uZHMgOiBzZWNvbmRzO1xuXHRcblx0ICAgIC8vIG5vIG9wdGltaXplZFxuXHQgICAgLy8gVE9ETyBkaWZmIGNvbnRlbnQsIGFuZCBvbmx5IG92ZXJ3cml0ZSB3aGVyZSB0aGVyZSdzIGEgY2hhbmdlXG5cdCAgICBjaXR5Q250LmlubmVySFRNTCA9IG5hbWUgKyAnLCAnICsgY291bnRyeTtcblx0ICAgIHJhaW5DbnQuaW5uZXJIVE1MID0gKHJhaW4gJiYgcmFpblsnM2gnXSB8fCAwKSArICcgbW0nO1xuXHQgICAgdGVtcENudC5pbm5lckhUTUwgPSAnJyArIE1hdGgucm91bmQobWFpbi50ZW1wKSArIChwYXJhbXMudW5pdHMgPT09IF9jb25zdGFudHMuSU1QRVJJQUwgPyAnJmRlZztGJyA6ICcmZGVnO0MnKTtcblx0ICAgIHByZXNDbnQuaW5uZXJIVE1MID0gTWF0aC5yb3VuZChtYWluLnByZXNzdXJlKSArICcgaFBhJztcblx0ICAgIGNsb3Vkc0NudC5pbm5lckhUTUwgPSBjbG91ZHMuYWxsICsgJyUnO1xuXHQgICAgZGF0ZUNudC5pbm5lckhUTUwgPSBkYXkgKyAnLycgKyBtb250aCArICcvJyArIHllYXI7XG5cdCAgICB0aW1lQ250LmlubmVySFRNTCA9IGhvdXJzICsgJzonICsgbWludXRlcyArICc6JyArIHNlY29uZHM7XG5cdFxuXHQgICAgLy8gbm90IG9wdGltaXplZFxuXHQgICAgLy8gYWN0aW9ucyBhcyBhYm92ZVxuXHQgICAgbmV4dEJ1dHRvbi5kaXNhYmxlZCA9IGNvbnRyb2xzRW5hYmxlZC5uZXh0ID8gZmFsc2UgOiB0cnVlO1xuXHQgICAgcHJldkJ1dHRvbi5kaXNhYmxlZCA9IGNvbnRyb2xzRW5hYmxlZC5wcmV2ID8gZmFsc2UgOiB0cnVlO1xuXHR9XG5cdFxuXHQvKipcclxuXHQgKiBbdXBkYXRlRm9yZWNhc3QgZGVzY3JpcHRpb25dXHJcblx0ICogQHBhcmFtICB7W3R5cGVdfSBmb3JlY2FzdERhdGEgW2Rlc2NyaXB0aW9uXVxyXG5cdCAqIEByZXR1cm4ge1t0eXBlXX0gICAgICAgICAgICAgIFtkZXNjcmlwdGlvbl1cclxuXHQgKi9cblx0ZnVuY3Rpb24gdXBkYXRlRm9yZWNhc3QoZm9yZWNhc3REYXRhKSB7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdFxuXHQgICAgcmVuZGVyKGZvcmVjYXN0RGF0YSk7XG5cdH1cblx0XG5cdC8qKlxyXG5cdCAqIFtnZXROZXh0RGF0YSBkZXNjcmlwdGlvbl1cclxuXHQgKiBAcGFyYW0gIHtbdHlwZV19IG5leHREYXRhIFtkZXNjcmlwdGlvbl1cclxuXHQgKiBAcmV0dXJuIHtbdHlwZV19ICAgICAgICAgIFtkZXNjcmlwdGlvbl1cclxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TmV4dERhdGEobmV4dERhdGEpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICByZW5kZXIobmV4dERhdGEpO1xuXHR9XG5cdFxuXHQvKipcclxuXHQgKiBbZ2V0UHJldkRhdGEgZGVzY3JpcHRpb25dXHJcblx0ICogQHBhcmFtICB7W3R5cGVdfSBwcmV2RGF0YSBbZGVzY3JpcHRpb25dXHJcblx0ICogQHJldHVybiB7W3R5cGVdfSAgICAgICAgICBbZGVzY3JpcHRpb25dXHJcblx0ICovXG5cdGZ1bmN0aW9uIGdldFByZXZEYXRhKHByZXZEYXRhKSB7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdFxuXHQgICAgcmVuZGVyKHByZXZEYXRhKTtcblx0fVxuXHRcblx0bmV4dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICAvLyBpZiBjYWxsYmFjayBpcyBjb25maWd1cmVkXG5cdFxuXHQgICAgaWYgKGZvcmVjYXN0RXZlbnRIYW5kbGVycy5vbk5leHQpIHtcblx0ICAgICAgICBmb3JlY2FzdEV2ZW50SGFuZGxlcnMub25OZXh0KCk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0cHJldkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICAvLyBpZiBjYWxsYmFjayBpcyBjb25maWd1cmVkXG5cdFxuXHQgICAgaWYgKGZvcmVjYXN0RXZlbnRIYW5kbGVycy5vblByZXYpIHtcblx0ICAgICAgICBmb3JlY2FzdEV2ZW50SGFuZGxlcnMub25QcmV2KCk7XG5cdCAgICB9XG5cdH0pO1xuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBhcHAvYXBwLmpzXG4gKiovIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCA2OTU0MzdkYzM2Yjc0MzE5Nzk2NlxuICoqLyIsIi8vIGVudHJ5IHBvaW50XHJcbmltcG9ydCAnLi9hcHAuY29udHJvbGxlcnMuanMnO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL2FwcC5qc1xuICoqLyIsImltcG9ydCB7Z2V0Rm9yZWNhc3R9IGZyb20gJy4vZm9yZWNhc3QvZm9yZWNhc3Quc2VydmljZXMuanMnO1xyXG5pbXBvcnQge2FwcEV2ZW50SGFuZGxlcnN9IGZyb20gJy4vYXBwLnZpZXdzLmpzJztcclxuaW1wb3J0IHt1cGRhdGVGb3JlY2FzdCwgZm9yZWNhc3RFdmVudEhhbmRsZXJzLCBjb250cm9sc0VuYWJsZWR9IGZyb20gJy4vZm9yZWNhc3QvZm9yZWNhc3Qudmlld3MuanMnO1xyXG5cclxuLy8gaG9sZHMgY3VycmVudCBmb3JlY2FzdCBkYXRhIGZvcm0gQVBJXHJcbmxldCBjdXJyZW50RGF0YTtcclxuLy8gdGhlIGluZGV4IG9mIHRoZSBjdXJyZW50IChzaW5nbGUpIGZvcmVjYXN0XHJcbmxldCBjdXJyZW50Rm9yY2FzdEluZGV4ID0gMDtcclxuXHJcbi8qKlxyXG4gKiBQcmVwYXJlcyBkYXRhIGZvciB0aGUgdmlldywgYW5kIGFuZCB1cGRhdGVzIGl0LlxyXG4gKiBcclxuICogQHBhcmFtICB7T2JqZWN0fSBmb3JlY2FzdERhdGEgICAgYmVzcG9rZSBkYXRhIG9iamVjdCBjb250YWluaW5nIGJvdGggdGhlIG9yaWdpbmFsIHJlc3BvbnNlIGFuZCBxdWVyeSBwYXJhbXNcclxuICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlRm9yZWNhc3RWaWV3KHtwYXJhbXMsIHJlc3BvbnNlfSkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHVwZGF0ZUZvcmVjYXN0KHtcclxuICAgICAgICBwYXJhbXM6IHBhcmFtcyxcclxuICAgICAgICByZXNwb25zZToge1xyXG4gICAgICAgICAgICBjaXR5OiByZXNwb25zZS5jaXR5LFxyXG4gICAgICAgICAgICBzaW5nbGVGb3JlY2FzdDogcmVzcG9uc2UubGlzdFtjdXJyZW50Rm9yY2FzdEluZGV4XVxyXG4gICAgICAgIH1cclxuICAgIH0pOyAgIFxyXG59XHJcblxyXG4vKipcclxuICogQSBoYW5kbGVyIGZvciB0aGUgb24gc2VhcmNoIGV2ZW50LlxyXG4gKiBDYWxscyBzZXJ2aWNlIG1ldGhvZCB0byBnZXQgZm9yZWNhc3QgZGF0YSBmcm9tIEFQSS5cclxuICogXHJcbiAqIEBwYXJhbSAge1N0cmluZ30gc2VhcmNoVGV4dCAgdGhlIHRleHQgdGhhdCB1c2VyIGVudGVyZWQgaW4gdGhlIHNlYXJjaCBib3hcclxuICogQHBhcmFtICB7U3RyaW5nfSB1bml0cyAgICAgICBlaXRoZXIgJ21ldHJpYycgb3IgJ2ltcGVyaWFsJ1xyXG4gKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAqL1xyXG5hcHBFdmVudEhhbmRsZXJzLm9uU2VhcmNoID0gKHNlYXJjaFRleHQsIHVuaXRzKSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgbGV0IFtjaXR5LCBjb3VudHJ5XSA9IHNlYXJjaFRleHQuc3BsaXQoJywnKTtcclxuXHJcbiAgICBnZXRGb3JlY2FzdChjaXR5LCBjb3VudHJ5LCB1bml0cylcclxuICAgICAgICAudGhlbigoZm9yZWNhc3REYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHJlZnJlc2ggZGF0YVxyXG4gICAgICAgICAgICBjdXJyZW50RGF0YSA9IGZvcmVjYXN0RGF0YTtcclxuICAgICAgICAgICAgLy8gcmVzZXQgaW5kZXhcclxuICAgICAgICAgICAgY3VycmVudEZvcmNhc3RJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIHVwZGF0ZUZvcmVjYXN0VmlldyhjdXJyZW50RGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogQSBoYW5kbGVyIGZvciB0aGUgb24gbmV4dCBldmVudC5cclxuICogVXBkYXRlcyBmaXJlY3QgdmlldyBpZiB1cGRhdGUgaXMgYXZhaWxhYmxlLlxyXG4gKiBcclxuICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gKi9cclxuZm9yZWNhc3RFdmVudEhhbmRsZXJzLm9uTmV4dCA9ICgpID0+IHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBpZiAoY3VycmVudEZvcmNhc3RJbmRleCArIDEgPCBjdXJyZW50RGF0YS5yZXNwb25zZS5saXN0Lmxlbmd0aCkge1xyXG4gICAgICAgIGN1cnJlbnRGb3JjYXN0SW5kZXgrKztcclxuICAgICAgICBjb250cm9sc0VuYWJsZWQubmV4dCA9IHRydWU7XHJcbiAgICAgICAgY29udHJvbHNFbmFibGVkLnByZXYgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29udHJvbHNFbmFibGVkLm5leHQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVGb3JlY2FzdFZpZXcoY3VycmVudERhdGEpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEEgaGFuZGxlciBmb3IgdGhlIG9uIHByZXYgZXZlbnQuXHJcbiAqIFVwZGF0ZXMgZmlyZWN0IHZpZXcgaWYgdXBkYXRlIGlzIGF2YWlsYWJsZS5cclxuICogXHJcbiAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICovXHJcbmZvcmVjYXN0RXZlbnRIYW5kbGVycy5vblByZXYgPSAoKSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgaWYgKGN1cnJlbnRGb3JjYXN0SW5kZXggLSAxID49IDApIHtcclxuICAgICAgICBjdXJyZW50Rm9yY2FzdEluZGV4LS07XHJcbiAgICAgICAgY29udHJvbHNFbmFibGVkLm5leHQgPSB0cnVlO1xyXG4gICAgICAgIGNvbnRyb2xzRW5hYmxlZC5wcmV2ID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnRyb2xzRW5hYmxlZC5wcmV2ID0gZmFsc2U7XHJcbiAgICB9ICAgIFxyXG5cclxuICAgIHVwZGF0ZUZvcmVjYXN0VmlldyhjdXJyZW50RGF0YSk7XHJcbn07XHJcblxyXG4vLyBpbml0XHJcbmdldEZvcmVjYXN0KClcclxuICAgIC50aGVuKChmb3JlY2FzdERhdGEpID0+IHtcclxuICAgICAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgICAgIC8vIHJlZnJlc2ggZGF0YVxyXG4gICAgICAgIGN1cnJlbnREYXRhID0gZm9yZWNhc3REYXRhO1xyXG4gICAgICAgIC8vIHJlc2V0IGluZGV4XHJcbiAgICAgICAgY3VycmVudEZvcmNhc3RJbmRleCA9IDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29udHJvbHNFbmFibGVkLnByZXYgPSBmYWxzZTtcclxuICAgICAgICB1cGRhdGVGb3JlY2FzdFZpZXcoY3VycmVudERhdGEpO1xyXG4gICAgfSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvYXBwLmNvbnRyb2xsZXJzLmpzXG4gKiovIiwiaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcuanMnO1xyXG5pbXBvcnQge0lNUEVSSUFMLCBNRVRSSUN9IGZyb20gJy4uL2NvbnN0YW50cy5qcyc7XHJcblxyXG4vKipcclxuICogUGFyc2UgYW5kIHJldHVybiBhbiBBUEkgcXVlcnkgVVJMLlxyXG4gKiBcclxuICogQHBhcmFtICB7U3RyaW5nfSBjaXR5ICAgIHRoZSBuYW1lIG9mIGEgY2l0eVxyXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGNvdW50cnkgdGhlIG5hbWUgb2YgYSBjb3VudHJ5XHJcbiAqIEBwYXJhbSAge1N0cmluZ30gdW5pdHMgICB1bml0cyBmb3JtYXQsIGVpdGhlciBtZXRyaWMgb3IgaW1wZXJpYWxcclxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgIHRoZSBwYXJzZWQgdGVtcGxhdGUgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRRdWVyeVVSTChjaXR5LCBjb3VudHJ5LCB1bml0cykge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHJldHVybiBgaHR0cDovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvZm9yZWNhc3Q/cT0ke2NpdHl9LCR7Y291bnRyeX0mbW9kZT1qc29uJmFwcGlkPSR7Y29uZmlnLmFwaUtleX0mdW5pdHM9JHt1bml0c31gO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGZvcmVjYXN0IGRhdGEgZnJvbSBhcGkgZm9yIGdpdmVuIGxvY2F0aW9uLlxyXG4gKiBcclxuICogQHBhcmFtICB7U3RyaW5nfSBjaXR5ICAgIHRoZSBuYW1lIG9mIGEgY2l0eSwgZGVmYXVsdHMgdG8gJ0xvbmRvbidcclxuICogQHBhcmFtICB7U3RyaW5nfSBjb3VudHJ5IHRoZSBuYW1lIG9mIGEgY291bnRyeSwgZGVmYXVsdHMgdG8gJydcclxuICogQHBhcmFtICB7U3RyaW5nfSB1bml0cyAgIHVuaXRzIGZvcm1hdCwgZWl0aGVyIG1ldHJpYyBvciBpbXBlcmlhbCwgZGVmYXVsdHMgdG8gJ21ldHJpYydcclxuICogQHJldHVybiB7UHJvbWlzZX0gICAgICAgIGEgUHJvbWlzZSB0aGF0IGV2ZW50dWFsbHkgcmV0dXJucyBhIGN1c3RvbSBvYmplY3Qgd2l0aCByZXNwb25zZSwgYW5kIHF1ZXJ5IHBhcmFtZXRlcnMgXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9yZWNhc3QoY2l0eSA9ICdMb25kb24nLCBjb3VudHJ5ID0gJycsIHVuaXRzID0gTUVUUklDKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY29uc3QgcXVlcnlVUkwgPSBnZXRRdWVyeVVSTChjaXR5LCBjb3VudHJ5LCB1bml0cyk7XHJcblxyXG4gICAgcmV0dXJuIGZldGNoKHF1ZXJ5VVJMLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ2dldCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihwYXJzZWREYXRhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9yaWdpbmFsIHJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlOiBwYXJzZWREYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBxdWVyeSBwYXJhbXMgc2VudCB0byBBUElcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5OiBjaXR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyeTogY291bnRyeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRzOiB1bml0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvZm9yZWNhc3QvZm9yZWNhc3Quc2VydmljZXMuanNcbiAqKi8iLCJleHBvcnQgZGVmYXVsdCB7XHJcbiAgICBhcGlLZXk6ICczZjY5NzY3NTQyNGMzZDBhZmVhZmJlMDI2MTBjZTI3NCdcclxufTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9jb25maWcuanNcbiAqKi8iLCJleHBvcnQgY29uc3QgSU1QRVJJQUwgPSAnaW1wZXJpYWwnO1xyXG5leHBvcnQgY29uc3QgTUVUUklDID0gJ21ldHJpYyc7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvY29uc3RhbnRzLmpzXG4gKiovIiwiaW1wb3J0IHtNRVRSSUN9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcclxuXHJcbmV4cG9ydCBsZXQgYXBwRXZlbnRIYW5kbGVycyA9IHtcclxuICAgIG9uU2VhcmNoOiBudWxsLFxyXG4gICAgb25SZWZyZXNoOiBudWxsXHJcbn07XHJcblxyXG5jb25zdCBzZWFyY2hUZXh0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VhcmNoVGV4dCcpO1xyXG5jb25zdCBzZWFyY2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VhcmNoJyk7XHJcbmNvbnN0IHVuaXRzQ250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VuaXRzJyk7XHJcblxyXG4vLyBkZWZhdWx0XHJcbmxldCB1bml0c0Zvcm1hdCAgPSBNRVRSSUM7XHJcblxyXG4vLyBhIGJpdCBvZiBldmVudCBkZWxlZ2F0aW9uXHJcbnVuaXRzQ250LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2KSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY29uc3Qgbm9kZU5hbWUgPSBldi50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICBpZiAobm9kZU5hbWUgPT09ICdpbnB1dCcpIHtcclxuICAgICAgICB1bml0c0Zvcm1hdCA9IGV2LnRhcmdldC52YWx1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHVuaXRzRm9ybWF0ID0gZXYudGFyZ2V0LmNvbnRyb2wudmFsdWU7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8gbGlzdGVucyBmb3IgdXNlcidzIGtlcHJlc3NlcywgYW5kIHBhc3NlcyBkYXRhIHRvIGNvbnRyb2xsZXJcclxuc2VhcmNoVGV4dElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGV2KSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLy8gb25seSBvbiBlbnRlclxyXG4gICAgaWYgKGV2LmtleUNvZGUgPT09IDEzKSB7XHJcblxyXG4gICAgICAgIC8vIGlmIGNhbGxiYWNrIGlzIGNvbmZpZ3VyZWRcclxuICAgICAgICBpZiAoYXBwRXZlbnRIYW5kbGVycy5vblNlYXJjaCAmJiBzZWFyY2hUZXh0SW5wdXQudmFsdWUpIHtcclxuICAgICAgICAgICAgYXBwRXZlbnRIYW5kbGVycy5vblNlYXJjaChzZWFyY2hUZXh0SW5wdXQudmFsdWUsIHVuaXRzRm9ybWF0KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBzZWFyY2ggaW5wdXRcclxuICAgICAgICAgICAgc2VhcmNoVGV4dElucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuXHJcbi8vIGxpc3RlbnMgZm9yIHVzZXIncyBjbGlja3MsIGFuZCBwYXNzZXMgZGF0YSB0byBjb250cm9sbGVyXHJcbnNlYXJjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAvLyBpZiBjYWxsYmFjayBpcyBjb25maWd1cmVkXHJcbiAgICBpZiAoYXBwRXZlbnRIYW5kbGVycy5vblNlYXJjaCAmJiBzZWFyY2hUZXh0SW5wdXQudmFsdWUpIHtcclxuICAgICAgICBhcHBFdmVudEhhbmRsZXJzLm9uU2VhcmNoKHNlYXJjaFRleHRJbnB1dC52YWx1ZSwgdW5pdHNGb3JtYXQpO1xyXG5cclxuICAgICAgICAvLyByZXNldCB0aGUgc2VhcmNoIGlucHV0XHJcbiAgICAgICAgc2VhcmNoVGV4dElucHV0LnZhbHVlID0gJyc7XHJcbiAgICB9XHJcbn0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL2FwcC52aWV3cy5qc1xuICoqLyIsImltcG9ydCB7SU1QRVJJQUx9IGZyb20gJy4uL2NvbnN0YW50cy5qcyc7XHJcblxyXG5jb25zdCBjaXR5Q250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNpdHknKTtcclxuY29uc3QgcmFpbkNudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yYWluID4gc3BhbicpO1xyXG5jb25zdCB0ZW1wQ250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlbXAgPiBzcGFuJyk7XHJcbmNvbnN0IHByZXNDbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJlcyA+IHNwYW4nKTtcclxuY29uc3QgY2xvdWRzQ250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3VkcyA+IHNwYW4nKTtcclxuY29uc3QgZGF0ZUNudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW1lID4gaDInKTtcclxuY29uc3QgdGltZUNudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW1lID4gaDMnKTtcclxuY29uc3QgbmV4dEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb25zID4gLm5leHQnKTtcclxuY29uc3QgcHJldkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb25zID4gLnByZXYnKTtcclxuXHJcbmV4cG9ydCBsZXQgY29udHJvbHNFbmFibGVkID0ge1xyXG4gICAgbmV4dDogdHJ1ZSxcclxuICAgIHByZXY6IHRydWVcclxufTtcclxuXHJcbmV4cG9ydCBsZXQgZm9yZWNhc3RFdmVudEhhbmRsZXJzID0ge1xyXG4gICAgb25OZXh0OiBudWxsLFxyXG4gICAgb25QcmV2OiBudWxsXHJcbn07XHJcblxyXG4vKipcclxuICogUmVuZGVycyB2YWx1c2UgaW50byB0aGUgaHRtbCB1c2luZyBodG1sIHRlbXBsYXRlIHN0cmluZ3MuXHJcbiAqIFxyXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnMucmVzcG9uc2UgICAgdGhlIHJlc3BvbnNlIG9iamVjdCBmb3IgYSBzaW5nbGUgZm9yZWNhc3RcclxuICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25zLnBhcmFtcyAgICAgIHRoZWUgcXVlcnkgcGFyYW1ldGVyc1xyXG4gKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAqL1xyXG5mdW5jdGlvbiByZW5kZXIoe3Jlc3BvbnNlLCBwYXJhbXN9KSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY29uc3Qge25hbWUsIGNvdW50cnl9ID0gcmVzcG9uc2UuY2l0eTtcclxuICAgIGNvbnN0IHtyYWluLCBtYWluLCBjbG91ZHMsIGR0fSA9IHJlc3BvbnNlLnNpbmdsZUZvcmVjYXN0O1xyXG5cclxuICAgIC8vIGNvbnZlcnQgVU5JWCB0aW1lc3RhbXAgdG8gbWlsbGlzZWNvbmRzXHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZHQqMTAwMCk7XHJcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpO1xyXG5cclxuICAgIC8vIHBhcnNpbmcgZGF0ZSAtIHVnaFxyXG4gICAgbGV0IGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xyXG4gICAgZGF5ID0gZGF5IDwgMTAgPyBgMCR7ZGF5fWAgOiBkYXk7XHJcblxyXG4gICAgbGV0IG1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpICsgMTtcclxuICAgIG1vbnRoID0gbW9udGggPCAxMCA/IGAwJHttb250aH1gIDogbW9udGg7XHJcblxyXG4gICAgbGV0IGhvdXJzID0gZGF0ZS5nZXRVVENIb3VycygpO1xyXG4gICAgaG91cnMgPSBob3VycyA8IDEwID8gYDAke2hvdXJzfWAgOiBob3VycztcclxuXHJcbiAgICBsZXQgbWludXRlcyA9IGRhdGUuZ2V0VVRDTWludXRlcygpO1xyXG4gICAgbWludXRlcyA9IG1pbnV0ZXMgPCAxMCA/IGAwJHttaW51dGVzfWAgOiBtaW51dGVzO1xyXG5cclxuICAgIGxldCBzZWNvbmRzID0gZGF0ZS5nZXRVVENTZWNvbmRzKCk7XHJcbiAgICBzZWNvbmRzID0gc2Vjb25kcyA8IDEwID8gYDAke3NlY29uZHN9YCA6IHNlY29uZHM7XHJcblxyXG4gICAgLy8gbm8gb3B0aW1pemVkXHJcbiAgICAvLyBUT0RPIGRpZmYgY29udGVudCwgYW5kIG9ubHkgb3ZlcndyaXRlIHdoZXJlIHRoZXJlJ3MgYSBjaGFuZ2VcclxuICAgIGNpdHlDbnQuaW5uZXJIVE1MID0gYCR7bmFtZX0sICR7Y291bnRyeX1gO1xyXG4gICAgcmFpbkNudC5pbm5lckhUTUwgPSBgJHtyYWluICYmIHJhaW5bJzNoJ10gfHwgMH0gbW1gO1xyXG4gICAgdGVtcENudC5pbm5lckhUTUwgPSBgJHtNYXRoLnJvdW5kKG1haW4udGVtcCl9JHsocGFyYW1zLnVuaXRzID09PSBJTVBFUklBTCA/ICcmZGVnO0YnIDogJyZkZWc7QycpfWA7XHJcbiAgICBwcmVzQ250LmlubmVySFRNTCA9IGAke01hdGgucm91bmQobWFpbi5wcmVzc3VyZSl9IGhQYWA7XHJcbiAgICBjbG91ZHNDbnQuaW5uZXJIVE1MID0gYCR7Y2xvdWRzLmFsbH0lYDtcclxuICAgIGRhdGVDbnQuaW5uZXJIVE1MID0gYCR7ZGF5fS8ke21vbnRofS8ke3llYXJ9YDtcclxuICAgIHRpbWVDbnQuaW5uZXJIVE1MID0gYCR7aG91cnN9OiR7bWludXRlc306JHtzZWNvbmRzfWA7XHJcblxyXG4gICAgLy8gbm90IG9wdGltaXplZFxyXG4gICAgLy8gYWN0aW9ucyBhcyBhYm92ZVxyXG4gICAgbmV4dEJ1dHRvbi5kaXNhYmxlZCA9IGNvbnRyb2xzRW5hYmxlZC5uZXh0ID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgcHJldkJ1dHRvbi5kaXNhYmxlZCA9IGNvbnRyb2xzRW5hYmxlZC5wcmV2ID8gZmFsc2UgOiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogW3VwZGF0ZUZvcmVjYXN0IGRlc2NyaXB0aW9uXVxyXG4gKiBAcGFyYW0gIHtbdHlwZV19IGZvcmVjYXN0RGF0YSBbZGVzY3JpcHRpb25dXHJcbiAqIEByZXR1cm4ge1t0eXBlXX0gICAgICAgICAgICAgIFtkZXNjcmlwdGlvbl1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVGb3JlY2FzdChmb3JlY2FzdERhdGEpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJlbmRlcihmb3JlY2FzdERhdGEpO1xyXG59XHJcblxyXG4vKipcclxuICogW2dldE5leHREYXRhIGRlc2NyaXB0aW9uXVxyXG4gKiBAcGFyYW0gIHtbdHlwZV19IG5leHREYXRhIFtkZXNjcmlwdGlvbl1cclxuICogQHJldHVybiB7W3R5cGVdfSAgICAgICAgICBbZGVzY3JpcHRpb25dXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV4dERhdGEobmV4dERhdGEpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJlbmRlcihuZXh0RGF0YSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBbZ2V0UHJldkRhdGEgZGVzY3JpcHRpb25dXHJcbiAqIEBwYXJhbSAge1t0eXBlXX0gcHJldkRhdGEgW2Rlc2NyaXB0aW9uXVxyXG4gKiBAcmV0dXJuIHtbdHlwZV19ICAgICAgICAgIFtkZXNjcmlwdGlvbl1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQcmV2RGF0YShwcmV2RGF0YSkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgcmVuZGVyKHByZXZEYXRhKTtcclxufVxyXG4gXHJcbm5leHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLy8gaWYgY2FsbGJhY2sgaXMgY29uZmlndXJlZFxyXG4gICAgaWYgKGZvcmVjYXN0RXZlbnRIYW5kbGVycy5vbk5leHQpIHtcclxuICAgICAgICBmb3JlY2FzdEV2ZW50SGFuZGxlcnMub25OZXh0KCk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxucHJldkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAvLyBpZiBjYWxsYmFjayBpcyBjb25maWd1cmVkXHJcbiAgICBpZiAoZm9yZWNhc3RFdmVudEhhbmRsZXJzLm9uUHJldikge1xyXG4gICAgICAgIGZvcmVjYXN0RXZlbnRIYW5kbGVycy5vblByZXYoKTtcclxuICAgIH1cclxufSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvZm9yZWNhc3QvZm9yZWNhc3Qudmlld3MuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9